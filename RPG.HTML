<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æœƒè€ƒé–±è®€å‹‡è€…ï¼šå…­åˆ°ä¹å¼æŒ‘æˆ° (Gemini 5 Edition)</title>
    <link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&family=Noto+Sans+TC:wght@400;700;900&family=Noto+Serif+TC:wght@600&display=swap" rel="stylesheet">
    
    <style>
        /* =========================================
           Gemini 5 - åŸç”Ÿ CSS æ ¸å¿ƒå¼•æ“ (ä¸ä¾è³´å¤–éƒ¨åº«)
           ========================================= */
        :root {
            --bg-dark: #0f172a;
            --bg-panel: #1e293b;
            --primary: #0ea5e9; /* Sky-500 */
            --primary-glow: #38bdf8;
            --accent: #eab308; /* Yellow-500 */
            --danger: #ef4444; /* Red-500 */
            --text-main: #f1f5f9;
            --text-sub: #94a3b8;
        }

        * { box-sizing: border-box; }

        body {
            font-family: 'Noto Sans TC', "Microsoft JhengHei", sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            overflow: hidden;
            margin: 0;
            padding: 0;
            width: 100vw;
            height: 100vh;
            user-select: none;
        }

        h1, h2, .rpg-font {
            font-family: 'ZCOOL KuaiLe', cursive, sans-serif;
        }

        /* é€šç”¨å·¥å…·é¡ */
        .hidden { display: none !important; }
        .flex-center { display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .absolute-fill { position: absolute; inset: 0; width: 100%; height: 100%; }
        
        /* å®¹å™¨èˆ‡èƒŒæ™¯ */
        #game-container {
            position: relative;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, #1e293b 0%, #0f172a 100%);
        }

        .backdrop {
            background-color: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(8px);
            z-index: 30;
        }

        /* æŒ‰éˆ•æ¨£å¼ */
        .btn-start {
            font-family: 'ZCOOL KuaiLe', cursive;
            padding: 1rem 3rem;
            font-size: 2rem;
            color: white;
            background-color: #0284c7;
            border: none;
            border-radius: 9999px;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(56, 189, 248, 0.6);
            transition: transform 0.2s, background 0.2s;
        }
        .btn-start:hover { transform: scale(1.05); background-color: #0ea5e9; }
        .btn-start:active { transform: scale(0.95); }

        .btn-action {
            width: 100%;
            height: 100%;
            background-color: #dc2626;
            color: white;
            font-weight: bold;
            font-size: 1.5rem;
            border-radius: 12px;
            border: 4px solid #991b1b;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.2s;
        }
        .btn-action:disabled { opacity: 0.5; cursor: not-allowed; filter: grayscale(1); }
        .btn-action:not(:disabled):hover { background-color: #ef4444; }
        .btn-action:not(:disabled):active { transform: scale(0.95); }

        /* åœ°åœ–é—œå¡æŒ‰éˆ• */
        .stage-grid {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 1.5rem;
            width: 100%;
            max-width: 1200px;
            padding: 1rem;
            overflow-y: auto;
        }
        @media (min-width: 768px) { .stage-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (min-width: 1024px) { .stage-grid { grid-template-columns: repeat(4, 1fr); } }

        .stage-btn {
            height: 300px;
            background: rgba(30, 41, 59, 0.6);
            border: 4px solid #334155;
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        .stage-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .stage-btn:not(:disabled) { border-color: var(--primary); background: rgba(30, 41, 59, 0.9); color: white; }
        .stage-btn:not(:disabled):hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.5); background: rgba(15, 23, 42, 0.9); }
        .stage-icon { font-size: 4rem; margin-bottom: 1rem; }

        /* æˆ°é¬¥ä»‹é¢é…ç½® */
        .battle-header {
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid #334155;
            border-radius: 16px;
            padding: 0 20px;
            margin-bottom: 10px;
            z-index: 10;
        }
        .hp-container { flex: 1; margin: 0 20px; display: flex; flex-direction: column; align-items: center; }
        .hp-track { width: 100%; height: 12px; background: #334155; border-radius: 6px; overflow: hidden; position: relative; border: 1px solid #000; }
        .hp-fill { height: 100%; transition: width 0.3s ease; }
        .hp-player { background: linear-gradient(90deg, #0284c7, #38bdf8); }
        .hp-enemy { background: linear-gradient(90deg, #dc2626, #f87171); }

        .battle-main {
            flex: 1;
            display: flex;
            gap: 1rem;
            overflow: hidden;
            position: relative;
            z-index: 10;
            margin-bottom: 1rem;
        }
        .text-panel {
            flex: 7;
            background: rgba(15, 23, 42, 0.85);
            border: 1px solid rgba(56, 189, 248, 0.3);
            border-radius: 16px;
            padding: 1.5rem;
            overflow-y: auto;
            font-family: 'Noto Serif TC', serif;
            font-size: 1.5rem;
            line-height: 2.2;
            text-shadow: 0 1px 2px rgba(0,0,0,0.8);
        }
        .guide-panel {
            flex: 3;
            background: rgba(30, 41, 59, 0.9);
            border: 2px solid rgba(234, 179, 8, 0.5);
            border-radius: 16px;
            padding: 1rem;
            display: flex;
            flex-direction: column;
        }

        .question-area {
            height: 35%;
            min-height: 220px;
            background: rgba(15, 23, 42, 0.95);
            border-top: 4px solid var(--primary);
            border-radius: 16px 16px 0 0;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            z-index: 20;
            box-shadow: 0 -10px 30px rgba(0,0,0,0.5);
        }

        .options-container {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            overflow-y: auto;
        }
        @media (min-width: 768px) { .options-container { grid-template-columns: 1fr 1fr; } }
        
        .opt-btn {
            background: #1e293b;
            border: 1px solid #475569;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 8px;
            text-align: left;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
        }
        .opt-btn:hover { background: #334155; border-color: var(--primary); }
        .opt-btn.selected {
            border-color: var(--accent);
            background: rgba(234, 179, 8, 0.2);
            color: white;
            box-shadow: 0 0 15px rgba(234, 179, 8, 0.3);
            transform: scale(1.01);
        }
        .opt-btn.correct { background: #064e3b !important; border-color: #34d399 !important; color: #fff !important; }
        .opt-btn.wrong { background: #7f1d1d !important; border-color: #f87171 !important; color: #fff !important; animation: shake 0.3s; }

        .opt-tag {
            display: inline-flex;
            width: 24px;
            height: 24px;
            border: 1px solid var(--accent);
            color: var(--accent);
            border-radius: 50%;
            justify-content: center;
            align-items: center;
            font-size: 0.8rem;
            margin-right: 10px;
            flex-shrink: 0;
            font-weight: bold;
        }

        /* æ€ªç‰©èƒŒæ™¯èˆ‡å‹•ç•« */
        #monster-bg-container {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-size: 40vh;
            opacity: 0.3;
            filter: blur(2px) grayscale(0.5);
            z-index: 0;
            pointer-events: none;
            transition: all 0.3s;
        }
        .monster-active {
            animation: breathe 4s infinite ease-in-out;
            opacity: 1 !important;
            filter: none !important;
            font-size: 50vh !important;
            text-shadow: 0 0 50px rgba(255,0,0,0.5);
        }
        @keyframes breathe { 0%, 100% { transform: translate(-50%, -50%) scale(1); } 50% { transform: translate(-50%, -50%) scale(1.05); } }
        
        /* æ¨™è¨˜æ¨£å¼ */
        .highlight-target { background: rgba(250, 204, 21, 0.6); border-bottom: 2px solid #eab308; color: white; padding: 0 4px; }
        .highlight-clue { background: rgba(56, 189, 248, 0.5); border-bottom: 2px solid #0ea5e9; color: white; padding: 0 4px; }
        .highlight-delete { text-decoration: line-through; color: #64748b; text-decoration-color: #ef4444; text-decoration-thickness: 3px; }

        /* ç‰¹æ•ˆèˆ‡å‹•ç•« */
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
        @keyframes floatUp { 0% { opacity: 1; transform: translate(-50%, -50%); } 100% { opacity: 0; transform: translate(-50%, -150%); } }
        
        .damage-popup {
            position: absolute;
            top: 40%; left: 50%;
            transform: translate(-50%, -50%);
            color: #fbbf24;
            font-size: 5rem;
            font-weight: 900;
            font-family: 'ZCOOL KuaiLe', cursive;
            text-shadow: 3px 3px 0 #000;
            pointer-events: none;
            z-index: 100;
            animation: floatUp 1s forwards;
        }

        .flash-msg {
            position: absolute;
            top: 30%; left: 50%;
            transform: translate(-50%, -50%);
            font-size: 6rem;
            font-style: italic;
            font-weight: 900;
            color: white;
            text-shadow: 0 0 20px var(--primary);
            z-index: 101;
            opacity: 0;
            pointer-events: none;
        }
        .flash-anim { animation: slash 0.6s ease-out; }
        @keyframes slash { 0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); } 20% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); } 100% { opacity: 0; transform: translate(-50%, -50%) scale(1.5); } }

        /* æ»¾å‹•æ¢ */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }

    </style>
</head>
<body>

    <div id="game-container">
        
        <div id="screen-start" class="absolute-fill flex-center backdrop">
            <h1 style="font-size: 4rem; color: #38bdf8; text-shadow: 0 0 15px rgba(56,189,248,0.5); margin-bottom: 0;">æœƒè€ƒé–±è®€å‹‡è€…</h1>
            <h2 style="font-size: 2rem; color: white; margin-top: 10px;">ï½ æ±ºæˆ°å…­åˆ°ä¹å¼ (ä¿®å¾©ç‰ˆ) ï½</h2>
            <p style="color: #cbd5e1; font-size: 1.2rem; text-align: center; margin: 2rem 0; line-height: 1.8;">
                ç³»çµ±å…¨é¢å‡ç´šï¼Œæ¨æ£„è„†å¼±çš„é€£çµã€‚<br>
                å¾ Lv 1 é–‹å§‹ï¼Œé«”é©—çœŸæ­£çš„æµæš¢æˆ°é¬¥ã€‚<br>
                ç­”éŒ¯ç›´æ¥æ‰£è¡€ï¼Œè«‹è¬¹æ…é¸æ“‡ï¼
            </p>
            <button onclick="startGame()" class="btn-start">é–‹å§‹ä¿®ç…‰</button>
        </div>

        <div id="screen-map" class="absolute-fill backdrop hidden" style="flex-direction: column; padding: 2rem;">
            <h2 class="rpg-font" style="font-size: 3rem; color: #7dd3fc; text-align: center; margin-bottom: 2rem;">é¸æ“‡ä¿®ç…‰é—œå¡</h2>
            <div style="flex: 1; display: flex; justify-content: center; width: 100%;">
                <div class="stage-grid">
                    <button onclick="enterReview(0)" id="btn-0" class="stage-btn">
                        <div class="stage-icon">âš”ï¸</div>
                        <div style="font-size: 1.5rem; font-weight: bold; margin-bottom: 0.5rem;">ç¬¬å…­å¼ï¼šå¤§æ„é¡Œ</div>
                        <div style="color: #fbbf24;">éœ€æ±‚ç­‰ç´šï¼šLv 1</div>
                    </button>
                    <button onclick="enterReview(1)" id="btn-1" class="stage-btn" disabled>
                        <div class="stage-icon">ğŸ‘“</div>
                        <div style="font-size: 1.5rem; font-weight: bold; margin-bottom: 0.5rem;">ç¬¬ä¸ƒå¼ï¼šç´°ç¯€é¡Œ</div>
                        <div style="color: #f87171;">éœ€æ±‚ç­‰ç´šï¼šLv 15</div>
                    </button>
                    <button onclick="enterReview(2)" id="btn-2" class="stage-btn" disabled>
                        <div class="stage-icon">ğŸ’</div>
                        <div style="font-size: 1.5rem; font-weight: bold; margin-bottom: 0.5rem;">ç¬¬å…«å¼ï¼šæ·±é›£å­—è©</div>
                        <div style="color: #f87171;">éœ€æ±‚ç­‰ç´šï¼šLv 30</div>
                    </button>
                    <button onclick="enterReview(3)" id="btn-3" class="stage-btn" disabled>
                        <div class="stage-icon">ğŸ›¡ï¸</div>
                        <div style="font-size: 1.5rem; font-weight: bold; margin-bottom: 0.5rem;">ç¬¬ä¹å¼ï¼šæ–‡é«”æ‹†è§£</div>
                        <div style="color: #f87171;">éœ€æ±‚ç­‰ç´šï¼šLv 50</div>
                    </button>
                </div>
            </div>
            <div style="text-align: center; font-size: 1.5rem; color: #fbbf24; margin-top: 1rem; font-weight: bold;">
                å‹‡è€…éšç´šï¼šLV <span id="hero-lv">1</span>
            </div>
        </div>

        <div id="screen-review" class="absolute-fill flex-center backdrop hidden" style="background: rgba(15, 23, 42, 0.98);">
            <h2 class="rpg-font" style="font-size: 3rem; color: #38bdf8; margin-bottom: 1rem;">ç²å¾—å‚³èªªæ­¦å™¨ï¼</h2>
            <div style="font-size: 8rem; animation: bounce 2s infinite;" id="weapon-icon">âš”ï¸</div>
            <h3 id="weapon-name" style="font-size: 2.5rem; color: #fbbf24; margin: 1rem 0;">æ­¦å™¨åç¨±</h3>
            <div style="background: #1e293b; padding: 2rem; border-radius: 1rem; border: 2px solid #0284c7; max-width: 600px; width: 90%;">
                <p style="font-size: 1.2rem; font-weight: bold; margin-bottom: 1rem;">ã€æ­¦å™¨èƒ½åŠ›ã€‘</p>
                <ul id="weapon-desc" style="font-size: 1.1rem; line-height: 1.6; color: #cbd5e1; padding-left: 1.5rem;"></ul>
            </div>
            <button onclick="startCombat()" class="btn-start" style="margin-top: 2rem; background-color: #dc2626; box-shadow: 0 0 20px rgba(220, 38, 38, 0.6);">
                è£å‚™æ­¦å™¨ï¼Œé€²å…¥è¿·å®®ï¼
            </button>
        </div>

        <div id="screen-battle" class="absolute-fill hidden" style="display: flex; flex-direction: column; padding: 10px;">
            
            <div id="monster-bg-container">ğŸ²</div>
            <div id="flash-msg" class="flash-msg">SLASH!</div>

            <div class="battle-header">
                <div style="display: flex; flex-direction: column; width: 200px;">
                    <div style="display: flex; justify-content: space-between; color: #38bdf8; font-weight: bold; margin-bottom: 5px;">
                        <span>å‹‡è€… HP</span>
                        <span id="player-hp-text">100/100</span>
                    </div>
                    <div class="hp-track"><div id="player-hp-bar" class="hp-fill hp-player" style="width: 100%;"></div></div>
                </div>

                <div class="hp-container">
                    <div style="font-size: 1.5rem; font-weight: bold; color: #f87171; text-shadow: 0 2px 4px rgba(0,0,0,0.5); margin-bottom: 5px;" id="enemy-name">
                        é­”ç‹åç¨±
                    </div>
                    <div class="hp-track" style="width: 100%; max-width: 400px; height: 16px;">
                        <div id="enemy-hp-bar" class="hp-fill hp-enemy" style="width: 100%;"></div>
                    </div>
                </div>

                <div style="width: 150px; text-align: right; font-family: monospace; font-size: 1.2rem; color: #fbbf24; font-weight: bold;">
                    Stage <span id="current-stage-num">1</span>-<span id="current-q-num">1</span>
                </div>
            </div>

            <div class="battle-main">
                <div class="text-panel">
                    <div id="passage-text">æ–‡ç« è¼‰å…¥ä¸­...</div>
                </div>
                <div class="guide-panel">
                    <div style="text-align: center; border-bottom: 1px solid #475569; padding-bottom: 1rem; margin-bottom: 1rem;">
                        <div style="font-size: 3rem;" id="guide-weapon-icon">ğŸ‘“</div>
                        <div style="color: #fbbf24; font-weight: bold;" id="guide-weapon-name">æ­¦å™¨</div>
                    </div>
                    <div style="flex: 1; overflow-y: auto;">
                        <div style="background: #334155; padding: 1rem; border-radius: 8px; border-left: 4px solid #38bdf8;">
                            <div style="color: #7dd3fc; font-weight: bold; margin-bottom: 0.5rem;">Step <span id="guide-step-idx">1</span></div>
                            <div style="color: white; line-height: 1.5;" id="guide-text">æç¤ºæ–‡å­—</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="question-area">
                <div style="text-align: center; margin-bottom: 1rem;">
                    <span id="question-text" style="background: #1e293b; padding: 0.5rem 1.5rem; border-radius: 99px; font-weight: bold; border: 1px solid #475569;">
                        é¡Œç›®è¼‰å…¥ä¸­...
                    </span>
                </div>
                <div style="display: flex; gap: 1rem; height: 100%;">
                    <div id="options-grid" class="options-container"></div>
                    <div style="width: 160px; flex-shrink: 0;">
                        <button id="confirm-btn" onclick="executeAttack()" class="btn-action" disabled>
                            <span>âš”ï¸</span> ç™¼å‹•æ”»æ“Š
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="screen-result" class="absolute-fill flex-center backdrop hidden" style="z-index: 50; background: rgba(0,0,0,0.95);">
            <div style="font-size: 6rem; margin-bottom: 1rem;">ğŸ†</div>
            <h2 class="rpg-font" style="font-size: 4rem; color: #fbbf24; margin-bottom: 1rem;">æ”»ç•¥æˆåŠŸï¼</h2>
            <p style="font-size: 1.5rem; color: #cbd5e1; margin-bottom: 2rem;">ç­‰ç´šæå‡ï¼æº–å‚™å¥½æŒ‘æˆ°ä¸‹ä¸€é—œäº†å—ï¼Ÿ</p>
            <button onclick="backToMap()" class="btn-start">è¿”å›åœ°åœ–</button>
        </div>

        <div id="screen-gameover" class="absolute-fill flex-center backdrop hidden" style="z-index: 50; background: rgba(69, 10, 10, 0.95);">
            <div style="font-size: 6rem; margin-bottom: 1rem;">ğŸ’€</div>
            <h2 class="rpg-font" style="font-size: 4rem; color: #ef4444; margin-bottom: 1rem;">ä¿®ç…‰å¤±æ•—...</h2>
            <p style="font-size: 1.5rem; color: #cbd5e1; margin-bottom: 2rem;">å‹‡è€…å€’ä¸‹äº†ï¼Œè«‹é‡æ–°æŒ‘æˆ°ã€‚</p>
            <button onclick="retryStage()" class="btn-start" style="background-color: #4b5563;">é‡æ–°æŒ‘æˆ°</button>
        </div>

    </div>

    <script>
        // éŠæˆ²æ•¸æ“š
        const gameData = { heroLv: 1, unlockedStages: 0, currentStageIdx: 0, currentQIdx: 0, stepIdx: 0, enemyHp: 100, maxHp: 100, playerHp: 100, playerMaxHp: 100, selectedOption: null };

        // é¡Œç›®èˆ‡é—œå¡è³‡æ–™ (ä¿ç•™åŸæœ¬å…§å®¹ï¼Œé€™è£¡ç°¡ç•¥å‘ˆç¾çµæ§‹ä»¥ç¢ºä¿é‹ä½œ)
        const stages = [
            {
                name: "ç¬¬å…­å¼ï¼šå¤§æ„é¡Œ",
                levelReq: 1,
                weapon: { name: "å…«äºŒæ³•å‰‡ç¥åŠ", icon: "âš”ï¸", desc: "ã€èƒ½åŠ›ã€‘æ‰¾é ­æ‰¾å°¾ï¼Œæ–¬æ–·å†—è¨€ã€‚<li><strong>èµ·æ‰‹ï¼š</strong>åˆ¤æ–·æ–‡é«”èˆ‡çµæ§‹ã€‚</li><li><strong>é€£æ“Šï¼š</strong>é–å®šé¦–å°¾é—œéµå¥ã€‚</li>" },
                enemies: [ { name: "è«–è­‰å¹½éˆ", sprite: "ğŸ‘»", hp: 300, type: "mob" }, { name: "çµæ§‹å·¨äºº", sprite: "ğŸ—¿", hp: 300, type: "mob" }, { name: "ä¸»æ—¨é­”é¾", sprite: "ğŸ²", hp: 500, type: "boss" } ],
                questions: [
                    {
                        passage: "æ¼¢å¨œÂ·é„‚è˜­æå‡ºçš„ã€Œå¹³åº¸ä¹‹æƒ¡ã€ï¼Œä¸¦éæŒ‡æ¶‰ç½ªçŠ¯æœ¬èº«æ¥µç«¯é‚ªæƒ¡ï¼Œè€Œæ˜¯æŒ‡å¸¸äººæ”¾æ£„æ€è€ƒã€ç›²ç›®æœå¾æ¬Šå¨æ‰€é€ æˆçš„å·¨å¤§ç½é›£ã€‚ç´ç²¹è»å®˜è‰¾å¸Œæ›¼ä¸¦éç”Ÿæ€§æ®˜æš´ï¼Œä»–åªæ˜¯å°‡è‡ªå·±è¦–ç‚ºé€™éƒ¨æ®ºäººæ©Ÿå™¨ä¸­çš„ä¸€é¡†èºçµ²é‡˜ï¼Œç›¡å¿ è·å®ˆåœ°åŸ·è¡Œä¸Šç´šå‘½ä»¤ã€‚ç„¶è€Œï¼Œæ­£æ˜¯é€™ç¨®ã€Œä¸æ€è€ƒã€çš„å¹³åº¸ï¼Œæ§‹æˆäº†äººé¡æ­·å²ä¸Šæœ€é§­äººçš„ç½ªæƒ¡ã€‚<br><div style='background:#0f172a; padding:10px; margin-top:10px; border-radius:8px; border:1px solid #334155;'>ã€æ¨¡æ“¬è€ƒé¡Œã€‘æœ¬æ–‡æ‰€è¬‚ã€Œå¹³åº¸ä¹‹æƒ¡ã€çš„æ„æ¶µï¼Œä¸‹åˆ—ä½•è€…æ­£ç¢ºï¼Ÿ<br>(A) ç½ªå¤§æƒ¡æ¥µçš„æˆ°çŠ¯<br>(B) æ”¾æ£„æ€è€ƒè€Œç›²å¾çš„å¸¸äºº<br>(C) ç”Ÿæ€§æ®˜æš´çš„è»å®˜</div>",
                        steps: [
                            { q: "é€™æ˜¯é—œæ–¼ã€Œå¹³åº¸ä¹‹æƒ¡ã€çš„è­°è«–æ–‡ï¼Œèµ·æ‰‹å¼è©²æ‰¾ä»€éº¼ï¼Ÿ", opts: ["é–‹é ­çš„ã€Œå®šç¾©ã€èˆ‡çµå°¾çš„ã€Œçµè«–ã€", "ä¸­é–“æå¯«ç´ç²¹è»å®˜çš„ç´°ç¯€", "è¨ˆç®—è‰¾å¸Œæ›¼æ®ºäº†å¤šå°‘äºº"], ans: 0, damage: 100, guide: "åˆ¤æ–·å…«äºŒæ³•å‰‡æ‡‰ç”¨é»...", feedback: "çµæ§‹é–å®šï¼" },
                            { q: "è«‹æ‰¾å‡ºä½œè€…å°ã€Œå¹³åº¸ä¹‹æƒ¡ã€çš„æœ€çµ‚çµè«–ï¼ˆå°¾å·´ï¼‰ï¼š", opts: ["è‰¾å¸Œæ›¼ä¸¦éç”Ÿæ€§æ®˜æš´", "ä»–ç›¡å¿ è·å®ˆåŸ·è¡Œå‘½ä»¤", "ã€Œä¸æ€è€ƒã€çš„å¹³åº¸æ§‹æˆäº†æœ€é§­äººçš„ç½ªæƒ¡"], ans: 2, damage: 100, guide: "æ®åŠæ–¬å‘çµè«–ï¼", highlight: "æ­£æ˜¯é€™ç¨®ã€Œä¸æ€è€ƒã€çš„å¹³åº¸ï¼Œæ§‹æˆäº†äººé¡æ­·å²ä¸Šæœ€é§­äººçš„ç½ªæƒ¡ã€‚", feedback: "æ ¸å¿ƒè«–é»æš´éœ²ï¼" },
                            { q: "æ ¹æ“šé«˜äº®å¥ï¼Œæœ¬æ–‡ä¸»æ—¨ç‚ºä½•ï¼Ÿ", opts: ["(A) ç½ªå¤§æƒ¡æ¥µçš„æˆ°çŠ¯", "(B) æ”¾æ£„æ€è€ƒè€Œç›²å¾çš„å¸¸äºº", "(C) ç”Ÿæ€§æ®˜æš´çš„è»å®˜"], ans: 1, damage: 100, guide: "çµ¦äºˆæœ€å¾Œä¸€æ“Šï¼", feedback: "æ–¬æ–·è¿·æ€ï¼" }
                        ]
                    },
                    { passage: "æ©Ÿæœƒæˆæœ¬æ˜¯ç¶“æ¿Ÿå­¸åŸºçŸ³ã€‚ç•¶ä½ é¸æ“‡ Aï¼Œæ”¾æ£„çš„ B ä¹‹ä¸­åƒ¹å€¼æœ€é«˜è€…ï¼Œå°±æ˜¯ä½ çš„æ©Ÿæœƒæˆæœ¬ã€‚ä¾‹å¦‚ä½ èŠ± 1 å°æ™‚æ»‘æ‰‹æ©Ÿï¼Œæ”¾æ£„äº†æ‰“å·¥è³º 160 å…ƒæˆ–ç¡è¦ºè£œçœ ã€‚è‹¥ä½ èªç‚ºç¡è¦ºåƒ¹å€¼æœ€é«˜ï¼Œé‚£æ»‘æ‰‹æ©Ÿçš„æ©Ÿæœƒæˆæœ¬å°±æ˜¯ã€Œç¡è¦ºçš„åƒ¹å€¼ã€ã€‚äº†è§£æ­¤æ¦‚å¿µï¼Œèƒ½åŠ©æˆ‘å€‘åšå‡ºæ›´ä½³æ±ºç­–ã€‚<br><div style='background:#0f172a; padding:10px; margin-top:10px; border-radius:8px; border:1px solid #334155;'>ã€æ¨¡æ“¬è€ƒé¡Œã€‘ä½œè€…æ’°å¯«æœ¬æ–‡çš„ä¸»è¦ç›®çš„ç‚ºä½•ï¼Ÿ<br>(A) æ•™å°è¨ˆç®—è–ªè³‡<br>(B) èªªæ˜æ©Ÿæœƒæˆæœ¬ä»¥å„ªåŒ–æ±ºç­–<br>(C) å‹¸å°ä¸è¦æ»‘æ‰‹æ©Ÿ</div>", steps: [{q:"é€™æ˜¯ä¸€ç¯‡èªªæ˜æ–‡ï¼Œä¸»æ—¨é€šå¸¸è—åœ¨å“ªï¼Ÿ", opts:["ä¸­é–“çš„èˆ‰ä¾‹èªªæ˜", "ç¬¬ä¸€å¥çš„å®šç¾©æˆ–æœ€å¾Œä¸€å¥çš„çµè«–", "éš¨æ©Ÿåˆ†ä½ˆ"], ans:1, damage:100, guide:"åˆ¤æ–·ä½ç½®...", feedback:"é–å®šé¦–å°¾ï¼"}, {q:"è«‹æ‰¾å‡ºæœ¬æ–‡çš„ã€Œå¯«ä½œç›®çš„ã€ï¼ˆçµè«–ï¼‰ï¼š", opts:["æ©Ÿæœƒæˆæœ¬æ˜¯ç¶“æ¿Ÿå­¸åŸºçŸ³", "ä¾‹å¦‚ä½ èŠ± 1 å°æ™‚æ»‘æ‰‹æ©Ÿ", "äº†è§£æ­¤æ¦‚å¿µï¼Œèƒ½åŠ©æˆ‘å€‘åšå‡ºæ›´ä½³æ±ºç­–"], ans:2, damage:100, guide:"é–å®šå°¾å·´ï¼", highlight:"äº†è§£æ­¤æ¦‚å¿µï¼Œèƒ½åŠ©æˆ‘å€‘åšå‡ºæ›´ä½³æ±ºç­–ã€‚", feedback:"ç›®çš„æ˜ç¢ºï¼"}, {q:"ä½œè€…å¯«é€™æ®µæ–‡å­—çš„æ ¸å¿ƒç”¨æ„æ˜¯ï¼Ÿ", opts:["(A) æ•™å°è¨ˆç®—è–ªè³‡", "(B) èªªæ˜æ©Ÿæœƒæˆæœ¬ä»¥å„ªåŒ–æ±ºç­–", "(C) å‹¸å°ä¸è¦æ»‘æ‰‹æ©Ÿ"], ans:1, damage:100, guide:"çµ‚çµï¼", feedback:"ç†è§£æ­£ç¢ºï¼"}] },
                    { passage: "åŒ—æ¥µç†Šæ˜¯åŒ—æ¥µåœˆçš„é ‚ç´šæ é£Ÿè€…ï¼Œæ“æœ‰æ¥µåšçš„è„‚è‚ªå±¤ä»¥æŠµç¦¦åš´å¯’ã€‚ç‰ å€‘ä¸»è¦åœ¨æµ·å†°ä¸Šçµæ•æµ·è±¹ç¶­ç”Ÿã€‚éš¨è‘—å…¨çƒæš–åŒ–åŠ åŠ‡ï¼ŒåŒ—æ¥µæµ·å†°èåŒ–çš„é€Ÿåº¦è¶Šä¾†è¶Šå¿«ï¼Œé€™ä½¿å¾—åŒ—æ¥µç†Šçš„ç‹©çµå ´åŸŸå¤§å¹…ç¸®æ¸›ã€‚ç‚ºäº†å°‹æ‰¾é£Ÿç‰©ï¼Œç‰ å€‘è¢«è¿«æ¸¸å¾—æ›´é ï¼Œç”šè‡³é€²å…¥äººé¡å±…ä½åœ°ã€‚é€™ç¨®ç¾è±¡é¡¯ç¤ºï¼Œæ°£å€™è®Šé·å·²å°åŒ—æ¥µç†Šçš„ç”Ÿå­˜é€ æˆäº†åš´é‡å¨è„…ã€‚<br><div style='background:#0f172a; padding:10px; margin-top:10px; border-radius:8px; border:1px solid #334155;'>ã€æ¨¡æ“¬è€ƒé¡Œã€‘é€™æ®µæ–‡å­—çš„ä¸»æ—¨æ˜¯ï¼Ÿ<br>(A) åŒ—æ¥µç†Šçš„èº«é«”æ§‹é€ <br>(B) æ°£å€™è®Šé·å¨è„…åŒ—æ¥µç†Šç”Ÿå­˜<br>(C) äººé¡æ‡‰é¤µé£ŸåŒ—æ¥µç†Š</div>", steps: [{q:"ã€é­”ç‹æˆ°ã€‘é¢å°ã€Œç¾è±¡-è§£é‡‹-çµè«–ã€çµæ§‹ï¼Œå…«äºŒç¥åŠæ–¬å‘ä½•è™•ï¼Ÿ", opts:["ä¸­é–“çš„çµæ•éç¨‹", "é–‹é ­çš„å‹•ç‰©ä»‹ç´¹", "çµå°¾çš„ç¾è±¡ç¸½çµ"], ans:2, damage:100, guide:"åˆ†æçµæ§‹...", feedback:"è­˜ç ´çµæ§‹ï¼"}, {q:"ã€é­”ç‹æˆ°ã€‘æ‰¾å‡ºå°è‡´åŒ—æ¥µç†Šå¨è„…çš„ã€Œæ ¹æœ¬åŸå› ã€é—œéµå­—ï¼š", opts:["è„‚è‚ªå±¤", "å…¨çƒæš–åŒ–", "æµ·è±¹"], ans:1, damage:100, guide:"é–å®šåŸå› ...", highlight:"å…¨çƒæš–åŒ–", feedback:"å…ƒå…‡æ˜¯æš–åŒ–ï¼"}, {q:"ã€é­”ç‹æˆ°ã€‘æ‰¾å‡ºæè¿°ã€Œå¾Œæœã€çš„é—œéµå¥ï¼š", opts:["ä¸»è¦åœ¨æµ·å†°ä¸Šçµæ•æµ·è±¹", "è¢«è¿«æ¸¸å¾—æ›´é ", "æ“æœ‰æ¥µåšçš„è„‚è‚ªå±¤"], ans:1, damage:100, guide:"æ¨å°å¾Œæœ...", highlight:"è¢«è¿«æ¸¸å¾—æ›´é ", feedback:"ç”Ÿå­˜å›°å¢ƒï¼"}, {q:"ã€é­”ç‹æˆ°ã€‘æ‰¾å‡ºå…¨ç¯‡çµè«–å¥ï¼š", opts:["åŒ—æ¥µç†Šæ˜¯é ‚ç´šæ é£Ÿè€…", "æ°£å€™è®Šé·å·²å°åŒ—æ¥µç†Šçš„ç”Ÿå­˜é€ æˆäº†åš´é‡å¨è„…", "é€²å…¥äººé¡å±…ä½åœ°"], ans:1, damage:100, guide:"é–å®šçµè«–ï¼", highlight:"æ°£å€™è®Šé·å·²å°åŒ—æ¥µç†Šçš„ç”Ÿå­˜é€ æˆäº†åš´é‡å¨è„…ã€‚", feedback:"æ ¸å¿ƒæš´éœ²ï¼"}, {q:"ã€å¥§ç¾©ã€‘é€™æ®µæ–‡å­—ä¸»è¦åœ¨èªªæ˜ï¼Ÿ", opts:["(A) åŒ—æ¥µç†Šçš„èº«é«”æ§‹é€ ", "(B) æ°£å€™è®Šé·å¨è„…åŒ—æ¥µç†Šç”Ÿå­˜", "(C) äººé¡æ‡‰é¤µé£ŸåŒ—æ¥µç†Š"], ans:1, damage:100, guide:"è–å…‰çˆ†è£‚ï¼", feedback:"é­”é¾è¢«æ·¨åŒ–äº†ï¼"}] }
                ]
            },
            {
                name: "ç¬¬ä¸ƒå¼ï¼šç´°ç¯€é¡Œ",
                levelReq: 15,
                weapon: { name: "é·¹çœ¼è­·ç›®é¡", icon: "ğŸ‘“", desc: "ã€èƒ½åŠ›ã€‘æƒæé¸é …ï¼Œé€è¦–ç´°ç¯€ã€‚<li><strong>é€è¦–ï¼š</strong>å…ˆè®€é¸é …é—œéµå­—ã€‚</li><li><strong>æƒæï¼š</strong>å›åˆ°æ–‡ç« å®šä½ã€‚</li>" },
                enemies: [ { name: "æ•¸æ“šè™è ", sprite: "ğŸ¦‡", hp: 300, type: "mob" }, { name: "é‚è¼¯èœ˜è››", sprite: "ğŸ•·ï¸", hp: 300, type: "mob" }, { name: "ç´°ç¯€é­”çœ¼", sprite: "ğŸ‘¹", hp: 500, type: "boss" } ],
                questions: [
                    { passage: "èšå››æ°Ÿä¹™çƒ¯ï¼ˆPTFEï¼‰ä¿—ç¨±éµæ°Ÿé¾ï¼Œå› å…¶æ¥µä½çš„æ‘©æ“¦ä¿‚æ•¸è€Œè¢«å»£æ³›æ‡‰ç”¨æ–¼ä¸æ²¾é‹å¡—å±¤ã€‚PTFE çš„åŒ–å­¸æ€§è³ªæ¥µå…¶ç©©å®šï¼Œè€é…¸é¹¼ã€è€é«˜æº«ã€‚ç„¶è€Œï¼Œç•¶æº«åº¦è¶…é 260Â°C æ™‚ï¼Œå¡—å±¤å¯èƒ½é–‹å§‹è®Šè³ªï¼›è‹¥è¶…é 350Â°Cï¼Œå‰‡æœƒåˆ†è§£ç”¢ç”Ÿæœ‰æ¯’æ°£é«”ã€‚å› æ­¤ï¼Œä½¿ç”¨ä¸æ²¾é‹æ™‚æ‡‰é¿å…ç©ºç‡’ï¼Œä¸”ä¸å®œä½¿ç”¨é‡‘å±¬éŸï¼Œä»¥å…åˆ®å‚·å¡—å±¤å°è‡´ç‰©è³ªé‡‹å‡ºã€‚<br><div style='background:#0f172a; padding:10px; margin-top:10px; border-radius:8px; border:1px solid #334155;'>ã€æ¨¡æ“¬è€ƒé¡Œã€‘é—œæ–¼ä¸æ²¾é‹çš„ä½¿ç”¨ï¼Œä¸‹åˆ—æ•˜è¿°ä½•è€…æ­£ç¢ºï¼Ÿ<br>(A) éµæ°Ÿé¾è€é«˜æº«ï¼Œç©ºç‡’ä¹Ÿä¸æœƒé‡‹æ”¾æ¯’ç´ <br>(B) ç‚ºå»¶é•·å£½å‘½ï¼Œæ‡‰ä½¿ç”¨é‡‘å±¬éŸç¿»ç‚’<br>(C) è¶…é 260Â°C æ™‚ï¼Œå¡—å±¤æ€§è³ªå¯èƒ½æ”¹è®Š</div>", steps: [{q:"ã€é€è¦–ã€‘è«‹æƒæé¸é … (C) çš„é—œéµå­—ï¼š", opts:["è€é…¸é¹¼ã€ç©©å®š", "260Â°Cã€æ€§è³ªæ”¹è®Š", "é‡‘å±¬éŸã€åˆ®å‚·"], ans:1, damage:100, guide:"æƒæé¸é … C...", highlight:"(C) è¶…é 260Â°C æ™‚ï¼Œå¡—å±¤æ€§è³ªå¯èƒ½æ”¹è®Š", feedback:"é—œéµå­—ç¢ºèªï¼"}, {q:"ã€æƒæã€‘åœ¨æ–‡ä¸­æ‰¾å‡ºã€Œ260Â°Cã€çš„ç›¸é—œæ•˜è¿°ï¼š", opts:["åŒ–å­¸æ€§è³ªæ¥µå…¶ç©©å®š", "ç•¶æº«åº¦è¶…é 260Â°C æ™‚ï¼Œå¡—å±¤å¯èƒ½é–‹å§‹è®Šè³ª", "è¶…é 350Â°Cï¼Œç”¢ç”Ÿæœ‰æ¯’æ°£é«”"], ans:1, damage:100, guide:"æ¯”å°æ–‡ç« ...", highlight:"ç•¶æº«åº¦è¶…é 260Â°C æ™‚ï¼Œå¡—å±¤å¯èƒ½é–‹å§‹è®Šè³ª", feedback:"æ•¸æ“šå»åˆï¼"}, {q:"ã€åˆ¤æ–·ã€‘é¸é … (C) æ˜¯å¦æ­£ç¢ºï¼Ÿ", opts:["æ­£ç¢º", "éŒ¯èª¤", "ç„¡æ³•åˆ¤æ–·"], ans:0, damage:100, guide:"ç™¼å‹•æ”»æ“Šï¼", feedback:"ç²¾æº–å‘½ä¸­ï¼"}] },
                    { passage: "é‚£é›™ç²—ç³™çš„æ‰‹ï¼Œä½ˆæ»¿äº†æ­²æœˆçš„åˆ»ç—•ï¼Œæ¯ä¸€é“è£‚ç´‹éƒ½è—è‘—ç‚ºå®¶åº­æ“å‹çš„æ•…äº‹ã€‚çˆ¶è¦ªå¾ä¸èªªæ„›ï¼Œä½†é¤æ¡Œä¸Šé‚£ç¢—ç¸½æ˜¯å‰å¥½æ®¼çš„è¦ï¼Œå»æ¯”ä»»ä½•è¨€èªéƒ½éœ‡è€³æ¬²è¾ã€‚<br><div style='background:#0f172a; padding:10px; margin-top:10px; border-radius:8px; border:1px solid #334155;'>ã€æ¨¡æ“¬è€ƒé¡Œã€‘é€™æ®µæ–‡å­—é‹ç”¨äº†ä»€éº¼å¯«ä½œæŠ€å·§ï¼Ÿ<br>(A) è—‰äº‹æŠ’æƒ…<br>(B) èª‡é£¾ä¿®è¾­<br>(C) å€’æ•˜æ‰‹æ³•</div>", steps: [{q:"é–å®šæ–‡ç« ä¸­çš„ã€Œå…·é«”äº‹ä»¶ã€ï¼š", opts:["æ­²æœˆçš„åˆ»ç—•", "å‰å¥½æ®¼çš„è¦", "éœ‡è€³æ¬²è¾"], ans:1, damage:100, guide:"å°‹æ‰¾äº‹ä»¶...", highlight:"é¤æ¡Œä¸Šé‚£ç¢—ç¸½æ˜¯å‰å¥½æ®¼çš„è¦", feedback:"äº‹ä»¶é–å®šï¼"}, {q:"é€™ä»¶äº‹ä»£è¡¨äº†ä»€éº¼æŠ½è±¡æƒ…æ„Ÿï¼Ÿ", opts:["çˆ¶è¦ªå¾ˆé–’", "çˆ¶è¦ªå–œæ­¡åƒæµ·é®®", "çˆ¶è¦ªæ²ˆé»˜ä½†æ·±åšçš„æ„›"], ans:2, damage:100, guide:"åˆ†ææƒ…æ„Ÿ...", highlight:"æ¯”ä»»ä½•è¨€èªéƒ½éœ‡è€³æ¬²è¾ã€‚", feedback:"æƒ…æ„Ÿé€£çµï¼"}, {q:"å°ç…§é¸é …ï¼Œå“ªä¸€å€‹ç¬¦åˆã€Œè—‰äº‹æŠ’æƒ…ã€ï¼Ÿ", opts:["(A) è—‰äº‹æŠ’æƒ…", "(B) èª‡é£¾ä¿®è¾­", "(C) å€’æ•˜æ‰‹æ³•"], ans:0, damage:100, guide:"çµ‚çµï¼", feedback:"æŠ€å·§è­˜ç ´ï¼"}] },
                    { passage: "è˜‡è»¾ï¼Œå­—å­ç»ï¼Œè™Ÿæ±å¡å±…å£«ã€‚ç”Ÿæ€§è±ªæ”¾ï¼Œä»•é€”åå·ï¼Œæ›¾å› ã€Œçƒè‡ºè©©æ¡ˆã€è²¶è¬«é»ƒå·ã€‚å…¶æ–‡æ±ªæ´‹æ£è‚†ï¼Œè©©è©äº¦è±ªé‚å¥”æ”¾ï¼Œèˆ‡çˆ¶è˜‡æ´µã€å¼Ÿè˜‡è½åˆç¨±ã€Œä¸‰è˜‡ã€ï¼ŒåŒåˆ—å”å®‹å¤æ–‡å…«å¤§å®¶ã€‚<br><div style='background:#0f172a; padding:10px; margin-top:10px; border-radius:8px; border:1px solid #334155;'>ã€æ¨¡æ“¬è€ƒé¡Œã€‘é—œæ–¼è˜‡è»¾ï¼Œä¸‹åˆ—ä½•è€…ã€ŒéŒ¯èª¤ã€ï¼Ÿ<br>(A) æ›¾é­é‡æ”¿æ²»è¿«å®³<br>(B) çˆ¶è¦ªæ˜¯è˜‡è½<br>(C) æ˜¯å”å®‹å…«å¤§å®¶ä¹‹ä¸€</div>", steps: [{q:"ã€é­”ç‹æˆ°ã€‘é¡Œç›®å•ã€ŒéŒ¯èª¤ã€ï¼Œé€™ä»£è¡¨ä»€éº¼ï¼Ÿ", opts:["åªæœ‰ä¸€å€‹é¸é …æ­£ç¢º", "æœ‰å…©å€‹é¸é …æ­£ç¢º", "åªæœ‰ä¸€å€‹é¸é …éŒ¯èª¤"], ans:2, damage:100, guide:"é€†å‘æ€è€ƒ...", feedback:"æ‰¾å‡ºå”¯ä¸€çš„è¬Šè¨€ï¼"}, {q:"ã€é­”ç‹æˆ°ã€‘é©—è­‰ (A)ã€Œæ”¿æ²»è¿«å®³ã€ï¼š", opts:["ç”Ÿæ€§è±ªæ”¾", "å› ã€Œçƒè‡ºè©©æ¡ˆã€è²¶è¬«é»ƒå·", "åŒåˆ—å”å®‹å…«å¤§å®¶"], ans:1, damage:100, guide:"æ¯”å° A...", highlight:"æ›¾å› ã€Œçƒè‡ºè©©æ¡ˆã€è²¶è¬«é»ƒå·", feedback:"A æ˜¯æ­£ç¢ºçš„ï¼"}, {q:"ã€é­”ç‹æˆ°ã€‘é©—è­‰ (B)ã€Œçˆ¶è¦ªæ˜¯è˜‡è½ã€ï¼š", opts:["èˆ‡çˆ¶è˜‡æ´µã€å¼Ÿè˜‡è½åˆç¨±ã€Œä¸‰è˜‡ã€", "å­—å­ç»", "è™Ÿæ±å¡å±…å£«"], ans:0, damage:100, guide:"æ¯”å° B...", highlight:"èˆ‡çˆ¶è˜‡æ´µã€å¼Ÿè˜‡è½åˆç¨±ã€Œä¸‰è˜‡ã€", feedback:"ç™¼ç¾çŸ›ç›¾ï¼B æ˜¯éŒ¯çš„ï¼"}, {q:"ã€é­”ç‹æˆ°ã€‘é©—è­‰ (C)ã€Œå”å®‹å…«å¤§å®¶ã€ï¼š", opts:["ä»•é€”åå·", "åŒåˆ—å”å®‹å¤æ–‡å…«å¤§å®¶", "å…¶æ–‡æ±ªæ´‹æ£è‚†"], ans:1, damage:100, guide:"æ¯”å° C...", highlight:"åŒåˆ—å”å®‹å¤æ–‡å…«å¤§å®¶ã€‚", feedback:"C æ˜¯æ­£ç¢ºçš„ï¼"}, {q:"ã€å¥§ç¾©ã€‘é¸å‡ºã€ŒéŒ¯èª¤ã€çš„æ•˜è¿°ï¼š", opts:["(A)", "(B)", "(C)"], ans:1, damage:100, guide:"çµ‚çµé­”çœ¼ï¼", feedback:"ç´°ç¯€é­”çœ¼è¢«å°å°ï¼"}] }
                ]
            },
            {
                name: "ç¬¬å…«å¼ï¼šæ·±é›£å­—è©",
                levelReq: 30,
                weapon: { name: "é€è¦–ç¨œé¡", icon: "ğŸ’", desc: "ã€èƒ½åŠ›ã€‘å…‰æŸæŠ˜å°„ï¼Œæ¨æ•²å­—ç¾©ã€‚" },
                enemies: [ { name: "å¤æ–‡çŸ³åƒ", sprite: "ğŸ—¿", hp: 300, type: "mob" }, { name: "å¤šç¾©å¹»å½±", sprite: "ğŸ‘»", hp: 300, type: "mob" }, { name: "æ–‡è¨€é­”ç¥", sprite: "ğŸ‘¹", hp: 500, type: "boss" } ],
                questions: [
                    { passage: "ä½™å˜—æ–¼åœŸåº«è¡—ï¼Œè¦‹ä¸€ä¸ï¼Œé›–è·›ä¸€è¶³ï¼Œè€Œæ•è¡£ä¹‹ä¸­ï¼Œçš†è“„æ›¸ä¹Ÿã€‚......äººéºä¹‹éŒ¢ï¼Œå‰‡è¬ä¸å—ï¼›éºä¹‹æ›¸ï¼Œå‰‡ã€Œä¿›ã€è€Œå—ä¹‹ã€‚<br><div style='background:#0f172a; padding:10px; margin-top:10px; border-radius:8px; border:1px solid #334155;'>ã€æ¨¡æ“¬è€ƒé¡Œã€‘æ–‡ä¸­ã€Œä¿›ã€å­—çš„æ„æ€æœ€æ¥è¿‘ä¸‹åˆ—ä½•è€…ï¼Ÿ<br>(A) å‹‰å¼·<br>(B) ä½é ­<br>(C) å¿«é€Ÿ</div>", steps: [{q:"ã€å®šä½ã€‘è«‹ç”¨ç¨œé¡é–å®šç›®æ¨™å­—ã€Œä¿›ã€ï¼š", opts:["æ•è¡£", "ä¿›", "è¬ä¸å—"], ans:1, damage:100, guide:"ç™¼å°„é»ƒå…‰å®šä½...", highlight:"ä¿›", highlightType:"target", feedback:"ç›®æ¨™å·²é–å®šï¼"}, {q:"ã€ç·šç´¢ã€‘ä¹ä¸æ‹¿åˆ°æ›¸å¾ˆé«˜èˆˆï¼Œå‹•ä½œä¸Šæœƒå¦‚ä½•è¡¨ç¤ºæ„Ÿè¬ï¼Ÿ", opts:["é«˜å‚²åœ°æ‹¿èµ°", "ä½é ­å½è…°æ¥å—", "å‹‰å¼·æ”¶ä¸‹"], ans:1, damage:100, guide:"è—å…‰å°‹æ‰¾ç·šç´¢...", highlight:"å—ä¹‹", highlightType:"clue", feedback:"èªå¢ƒç·šç´¢ç¢ºèªã€‚"}, {q:"ã€æŠ˜å°„ã€‘ç¶œåˆæ¨è«–ï¼Œã€Œä¿›ã€é€šã€Œä¿¯ã€ï¼Œæ„æ€æ˜¯ï¼Ÿ", opts:["(A) å‹‰å¼·", "(B) ä½é ­", "(C) å¿«é€Ÿ"], ans:1, damage:100, guide:"æ¨å°å­—ç¾©ï¼", highlight:"ä¿›", feedback:"æ¨è«–æ­£ç¢ºï¼"}] },
                    { passage: "ï¼ˆèœ€è³ˆï¼‰ä¹ƒå–å…¶æ˜“å”®è€…ï¼Œæ¨™ä¹‹ä»¥å»‰åƒ¹ï¼›å–å…¶ä¸æ˜“å”®è€…ï¼Œå±…ä¹‹ä»¥å¥‡åƒ¹ã€‚äººçˆ­è¶¨ä¹‹ã€‚<br><div style='background:#0f172a; padding:10px; margin-top:10px; border-radius:8px; border:1px solid #334155;'>ã€æ¨¡æ“¬è€ƒé¡Œã€‘æ–‡ä¸­ã€Œå±…ã€å­—çš„æ„æ€ç‚ºä½•ï¼Ÿ<br>(A) å±…ä½<br>(B) å›¤ç©<br>(C) æ­¸é‚„</div>", steps: [{q:"ã€å®šä½ã€‘é–å®šç›®æ¨™å­—ã€Œå±…ã€ï¼š", opts:["æ˜“å”®è€…", "å»‰åƒ¹", "å±…"], ans:2, damage:100, guide:"å®šä½...", highlight:"å±…", highlightType:"target", feedback:"é–å®šï¼"}, {q:"ã€ç·šç´¢ã€‘å•†äººå°ã€Œä¸æ˜“å”®ã€ï¼ˆé›£è³£ï¼‰çš„è²¨ç‰©ï¼Œæœƒæ€éº¼åšï¼Ÿ", opts:["ç«‹åˆ»ä¸Ÿæ‰", "æ‹¿ä¾†ä½", "å›¤ç©èµ·ä¾†ç­‰å¾…é«˜åƒ¹"], ans:2, damage:100, guide:"åˆ†æè¡Œç‚º...", highlight:"å–å…¶ä¸æ˜“å”®è€…", highlightType:"clue", feedback:"ç·šç´¢ï¼šé›£è³£çš„å…ˆæ”¾è‘—ã€‚"}, {q:"ã€æŠ˜å°„ã€‘æˆèªã€Œå¥‡è²¨å¯å±…ã€çš„ã€Œå±…ã€ï¼Œæ„æ€æ˜¯ï¼Ÿ", opts:["(A) å±…ä½", "(B) å›¤ç©", "(C) æ­¸é‚„"], ans:1, damage:100, guide:"å­—ç¾©é€è¦–ï¼", feedback:"çŸ³åƒå´©è§£ï¼"}] },
                    { passage: "å­æ›°ï¼šã€Œå­¸è€Œä¸æ€å‰‡ç½”ï¼Œæ€è€Œä¸å­¸å‰‡æ®†ã€‚ã€<br><div style='background:#0f172a; padding:10px; margin-top:10px; border-radius:8px; border:1px solid #334155;'>ã€æ¨¡æ“¬è€ƒé¡Œã€‘é—œæ–¼ã€Œç½”ã€èˆ‡ã€Œæ®†ã€çš„è§£é‡‹ï¼Œä½•è€…æ°ç•¶ï¼Ÿ<br>(A) ç½”ï¼šè¿·æƒ˜ / æ®†ï¼šå±éšª<br>(B) ç½”ï¼šæ¼ç¶² / æ®†ï¼šæ€ æƒ°<br>(C) ç½”ï¼šæ¬ºé¨™ / æ®†ï¼šæ­»äº¡</div>", steps: [{q:"ã€é­”ç‹æˆ°ã€‘å…ˆåˆ†æã€Œå­¸è€Œä¸æ€å‰‡ç½”ã€ï¼š", opts:["åªæ€è€ƒä¸å­¸ç¿’", "åªå­¸ç¿’ä¸æ€è€ƒ", "ä¸å­¸ä¹Ÿä¸æ€"], ans:1, damage:100, guide:"åˆ†æå¾ŒåŠå¥...", highlight:"å­¸è€Œä¸æ€å‰‡ç½”", highlightType:"clue", feedback:"æƒ…å¢ƒï¼šæ­»è®€æ›¸ã€‚"}, {q:"ã€é­”ç‹æˆ°ã€‘åªè®€æ›¸ä¸æƒ³åƒï¼Œçµæœæœƒå¦‚ä½•ï¼Ÿ", opts:["æœƒè¢«é­šç¶²ç¶²ä½", "æœƒæ¬ºé¨™è€å¸«", "æœƒæ„Ÿåˆ°è¿·æƒ˜"], ans:2, damage:100, guide:"æ¨å°ç½”...", highlight:"ç½”", highlightType:"target", feedback:"ç½” = è¿·æƒ˜ï¼"}, {q:"ã€é­”ç‹æˆ°ã€‘æ¥è‘—åˆ†æã€Œæ€è€Œä¸å­¸å‰‡æ®†ã€ï¼š", opts:["ç©ºæƒ³è€Œä¸å­¸ç¿’", "å­¸ç¿’è€Œä¸ç©ºæƒ³", "å¾ˆå±éšª"], ans:0, damage:100, guide:"åˆ†æå¾ŒåŠå¥...", highlight:"æ€è€Œä¸å­¸å‰‡æ®†", highlightType:"clue", feedback:"æƒ…å¢ƒï¼šç©ºæƒ³ã€‚"}, {q:"ã€é­”ç‹æˆ°ã€‘æ•´å¤©èƒ¡æ€äº‚æƒ³å»æ²’æ ¹åŸºï¼Œç²¾ç¥ç‹€æ…‹æœƒï¼Ÿ", opts:["å¾ˆæ‡¶æƒ°", "å¾ˆå±éšªã€ç–‘æƒ‘ä¸å®‰", "æ­»æ‰"], ans:1, damage:100, guide:"æ¨å°æ®†...", highlight:"æ®†", highlightType:"target", feedback:"æ®† = å±æ®†ï¼"}, {q:"ã€å¥§ç¾©ã€‘ç¶œåˆä»¥ä¸Šï¼Œé¸å‡ºæ­£ç¢ºè§£é‡‹ï¼š", opts:["(A)", "(B)", "(C)"], ans:0, damage:100, guide:"çµ‚æ¥µå…‰æŸï¼", highlight:"(A) ç½”ï¼šè¿·æƒ˜ / æ®†ï¼šå±éšª", feedback:"æ–‡è¨€é­”ç¥è¢«æ·¨åŒ–äº†ï¼"}] }
                ]
            },
            {
                name: "ç¬¬ä¹å¼ï¼šæ–‡é«”æ‹†è§£",
                levelReq: 50,
                weapon: { name: "é‚è¼¯è–ç›¾", icon: "ğŸ›¡ï¸", desc: "ã€èƒ½åŠ›ã€‘æ–‡é«”å…¨åˆ¶éœ¸ã€‚<li><strong>ç™½è©±æ–‡ï¼š</strong>åˆªé™¤ä¹‹åˆƒï¼ˆåˆªå†—è¨€ï¼‰ã€‚</li><li><strong>æ–°è©©ï¼š</strong>æ„è±¡é›·é”ï¼ˆåœˆé—œéµï¼‰ã€‚</li><li><strong>éŸ»æ–‡ï¼š</strong>å¢å­—é€é¡ï¼ˆåŠ å­—è§£ï¼‰ã€‚</li><li><strong>æ–‡è¨€ï¼š</strong>ä¸»èªç¥ç›¾ï¼ˆæ‰¾çœç•¥ï¼‰ã€‚</li>" },
                enemies: [
                    { name: "å†—è¨€å²èŠå§†", sprite: "ğŸŸ¢", hp: 300, type: "mob", desc: "ç™½è©±æ–‡æ€ªç‰©" },
                    { name: "æŠ½è±¡è¿·éœ§", sprite: "ğŸŒ«ï¸", hp: 300, type: "mob", desc: "æ–°è©©æ€ªç‰©" },
                    { name: "é›™æ–‡é›™é ­è›‡", sprite: "ğŸ", hp: 300, type: "mob", desc: "éŸ»æ–‡æ€ªç‰©" },
                    { name: "å¤æ–‡é­”ç¥", sprite: "ğŸ‘¿", hp: 500, type: "boss", desc: "æ–‡è¨€æ–‡é­”ç‹" }
                ],
                questions: [
                    { passage: "ç”Ÿå‘½å°±åƒä¸€å ´é¦¬æ‹‰æ¾ï¼Œé‡é»ä¸åœ¨æ–¼ç¬é–“çš„çˆ†ç™¼ï¼Œè€Œåœ¨æ–¼é€”ä¸­çš„å …æŒã€‚é›–ç„¶è·¯é€”é™é ï¼Œå……æ»¿æ±—æ°´èˆ‡æ·šæ°´ï¼Œå½·å½¿æ°¸é çœ‹ä¸åˆ°çµ‚é»ï¼Œä½†åªè¦ä¸€æ­¥ä¸€è…³å°ï¼Œå°±èƒ½æŠµé”ã€‚é‚£äº›è¯éº—çš„è£å‚™ã€æ—äººçš„å–é‡‡ã€ç”šè‡³æ˜¯å¶çˆ¾çš„è·Œå€’ï¼Œéƒ½ä¸éæ˜¯éç¨‹ä¸­çš„é»ç¶´ç½·äº†ã€‚<br><div style='background:#0f172a; padding:10px; margin-top:10px; border-radius:8px; border:1px solid #334155;'>ã€æ¨¡æ“¬è€ƒé¡Œã€‘ä½œè€…èªç‚ºç”Ÿå‘½çš„é‡é»åœ¨æ–¼ï¼Ÿ<br>(A) ç¬é–“çš„çˆ†ç™¼<br>(B) é€”ä¸­çš„å …æŒ<br>(C) è¯éº—çš„è£å‚™</div>", steps: [{q:"ã€ç™½è©±æ–‡æˆ°è¡“ã€‘å•Ÿå‹•ã€Œåˆªé™¤ä¹‹åˆƒã€ï¼è«‹æ‰¾å‡ºæ‡‰ã€Œåˆªé™¤ã€çš„ä¿®é£¾èªå¥ï¼š", opts:["é‡é»ä¸åœ¨æ–¼ç¬é–“çš„çˆ†ç™¼", "å……æ»¿æ±—æ°´èˆ‡æ·šæ°´ï¼Œå½·å½¿æ°¸é çœ‹ä¸åˆ°çµ‚é»", "åªè¦ä¸€æ­¥ä¸€è…³å°ï¼Œå°±èƒ½æŠµé”"], ans:1, damage:100, guide:"åˆªé™¤ä¿®é£¾...", highlight:"å……æ»¿æ±—æ°´èˆ‡æ·šæ°´ï¼Œå½·å½¿æ°¸é çœ‹ä¸åˆ°çµ‚é»", highlightType:"delete", feedback:"å†—è¨€å·²åˆªé™¤ï¼"}, {q:"ã€ç™½è©±æ–‡æˆ°è¡“ã€‘å†åˆªé™¤ã€Œèˆ‰ä¾‹/é»ç¶´ã€çš„éƒ¨åˆ†ï¼š", opts:["é‚£äº›è¯éº—çš„è£å‚™ã€æ—äººçš„å–é‡‡", "ç”Ÿå‘½å°±åƒä¸€å ´é¦¬æ‹‰æ¾", "åœ¨æ–¼é€”ä¸­çš„å …æŒ"], ans:0, damage:100, guide:"åˆªé™¤èˆ‰ä¾‹...", highlight:"é‚£äº›è¯éº—çš„è£å‚™ã€æ—äººçš„å–é‡‡ã€ç”šè‡³æ˜¯å¶çˆ¾çš„è·Œå€’", highlightType:"delete", feedback:"å¹²æ“¾æ’é™¤ï¼"}, {q:"ã€çµ‚çµæŠ€ã€‘å‰©ä¸‹çš„ã€Œéª¨å¹¹ã€ä¸»æ—¨æ˜¯ï¼Ÿ", opts:["(A) ç¬é–“çš„çˆ†ç™¼", "(B) é€”ä¸­çš„å …æŒ", "(C) è¯éº—çš„è£å‚™"], ans:1, damage:100, guide:"æ ¸å¿ƒä¸€æ“Šï¼", feedback:"å²èŠå§†è¢«æ·¨åŒ–äº†ï¼"}] },
                    { passage: "æ¯è¦ªæ˜¯å‚˜ / æ˜¯å·¨è‘‰ / æ˜¯å¤§æ¨¹ / ç‚ºäº†æˆ‘çš„æ¿• / ç‚ºäº†æˆ‘çš„ç†± / ç‚ºäº†æˆ‘çš„æ¶¼<br><div style='background:#0f172a; padding:10px; margin-top:10px; border-radius:8px; border:1px solid #334155;'>ã€æ¨¡æ“¬è€ƒé¡Œã€‘é€™é¦–è©©ä¸­ã€Œå‚˜ã€å·¨è‘‰ã€å¤§æ¨¹ã€è±¡å¾µäº†æ¯è¦ªçš„å“ªç¨®ç‰¹è³ªï¼Ÿ<br>(A) å–œæ„›å¤§è‡ªç„¶<br>(B) å°å­å¥³çš„ä¿è­·<br>(C) å¤šè®Šçš„æ€§æ ¼</div>", steps: [{q:"ã€æ–°è©©æˆ°è¡“ã€‘å•Ÿå‹•ã€Œæ„è±¡é›·é”ã€ï¼è«‹åœˆå‡ºè±¡å¾µæ¯è¦ªçš„ã€Œå…·é«”äº‹ç‰©ã€ï¼š", opts:["ç‚ºäº†ã€æˆ‘çš„", "æ¿•ã€ç†±ã€æ¶¼", "å‚˜ / æ˜¯å·¨è‘‰ / æ˜¯å¤§æ¨¹"], ans:2, damage:100, guide:"åœˆå‡ºå…·é«”åè©...", highlight:"å‚˜ / æ˜¯å·¨è‘‰ / æ˜¯å¤§æ¨¹", feedback:"å…·é«”æ„è±¡é–å®šï¼"}, {q:"ã€æ–°è©©æˆ°è¡“ã€‘é€™äº›äº‹ç‰©ï¼ˆå‚˜ã€æ¨¹ï¼‰æœ‰ä»€éº¼å…±åŒåŠŸèƒ½ï¼Ÿ", opts:["é®è”½ä¿è­·", "æä¾›é£Ÿç‰©", "è§€è³è£é£¾"], ans:0, damage:100, guide:"æ¨æ¸¬æ„è±¡...", feedback:"åŠŸèƒ½ï¼šä¿è­·èˆ‡é®è”½ï¼"}, {q:"ã€çµ‚çµæŠ€ã€‘é€™é¦–è©©æƒ³è¡¨é”çš„æ„è±¡æ˜¯ï¼Ÿ", opts:["(A) å–œæ„›å¤§è‡ªç„¶", "(B) å°å­å¥³çš„ä¿è­·", "(C) å¤šè®Šçš„æ€§æ ¼"], ans:1, damage:100, guide:"æ„è±¡è§£ç¢¼ï¼", feedback:"è¿·éœ§æ•£å»äº†ï¼"}] },
                    { passage: "æ¯è—¤è€æ¨¹æ˜é´‰ï¼Œå°æ©‹æµæ°´äººå®¶ï¼Œå¤é“è¥¿é¢¨ç˜¦é¦¬ã€‚å¤•é™½è¥¿ä¸‹ï¼Œæ–·è…¸äººåœ¨å¤©æ¶¯ã€‚<br><div style='background:#0f172a; padding:10px; margin-top:10px; border-radius:8px; border:1px solid #334155;'>ã€æ¨¡æ“¬è€ƒé¡Œã€‘é€™é¦–æ›²æå¯«äº†ä»€éº¼æ¨£çš„æƒ…æ„Ÿï¼Ÿ<br>(A) ç”°åœ’é–’é©<br>(B) æ¼‚æ³Šæ„è‹¦<br>(C) æˆ°å ´æ®ºæ•µ</div>", steps: [{q:"ã€éŸ»æ–‡æˆ°è¡“ã€‘åœˆå‡ºæœ€é‡è¦çš„ã€Œæ›²çœ¼ã€ï¼ˆé—œéµæƒ…æ„Ÿè©ï¼‰ï¼š", opts:["æ˜é´‰", "ç˜¦é¦¬", "æ–·è…¸äºº"], ans:2, damage:100, guide:"å°‹æ‰¾æ›²çœ¼...", highlight:"æ–·è…¸äºº", highlightType:"target", feedback:"æ›²çœ¼é–å®šï¼šæ–·è…¸äººï¼"}, {q:"ã€éŸ»æ–‡æˆ°è¡“ã€‘ã€Œå¢å­—ã€ç†è§£ï¼šæ¯è—¤(çºç¹)è€æ¨¹(æ£²æ¯)æ˜é´‰ã€‚é€™ç‡Ÿé€ äº†ä»€éº¼æ°£æ°›ï¼Ÿ", opts:["è•­ç‘Ÿæ·’æ¶¼", "ç†±é¬§ç¹è¯", "ç”Ÿæ©Ÿå‹ƒå‹ƒ"], ans:0, damage:100, guide:"é‚„åŸèªå¢ƒ...", highlight:"æ¯è—¤è€æ¨¹æ˜é´‰", highlightType:"clue", feedback:"æ°£æ°›ç¢ºèªï¼šè•­ç‘Ÿï¼"}, {q:"ã€çµ‚çµæŠ€ã€‘ç¶œåˆã€Œè•­ç‘Ÿæ™¯ç‰©ã€èˆ‡ã€Œæ–·è…¸äººã€ï¼Œç­”æ¡ˆæ˜¯ï¼Ÿ", opts:["(A) ç”°åœ’é–’é©", "(B) æ¼‚æ³Šæ„è‹¦", "(C) æˆ°å ´æ®ºæ•µ"], ans:1, damage:100, guide:"è–ç›¾è¡æ“Šï¼", feedback:"é›™é ­è›‡è¢«æ“Šæ½°ï¼"}] },
                    { passage: "ï¼ˆå­”å­ï¼‰å•ï¼šã€Œï¼ˆå­è·¯ï¼‰ä½•ä»¥ä¼ç‚ºï¼Ÿã€å°æ›°ï¼šã€Œï¼ˆå­è·¯ï¼‰æ˜”è€…ç”±ä¹Ÿèè«¸å¤«å­æ›°ï¼šã€ç‚ºåœ‹è€…ç„¡ä½¿ç‚ºç©ï¼Œç„¡æ³•è€…ç„¡ä½¿ç‚ºé›£ã€‚ã€ã€<br><span style='color:#94a3b8; font-size:0.9rem;'>è¨»ï¼šä¼ï¼šèª‡è€€ã€‚ ç”±ï¼šå­è·¯çš„åã€‚</span><br><div style='background:#0f172a; padding:10px; margin-top:10px; border-radius:8px; border:1px solid #334155;'>ã€æ¨¡æ“¬è€ƒé¡Œã€‘å­è·¯å¼•ç”¨å­”å­çš„è©±ï¼Œç›®çš„æ˜¯ç‚ºäº†ï¼Ÿ<br>(A) åé§å­”å­<br>(B) è§£é‡‹è‡ªå·±èª‡è€€çš„åŸå› <br>(C) æ‰¹è©•åœ‹å›</div>", steps: [{q:"ã€é­”ç‹æˆ°ã€‘ã€Œå¢åŠæ‰¾ã€ï¼šæ‰¾å‡ºçœç•¥çš„ä¸»èªã€‚èª°åœ¨å•ã€Œä½•ä»¥ä¼ç‚ºã€ï¼Ÿ", opts:["å­è·¯", "å­”å­", "å¤«å­"], ans:1, damage:100, guide:"å°‹æ‰¾éš±å½¢ä¸»èª...", highlight:"ï¼ˆå­”å­ï¼‰å•ï¼šã€Œï¼ˆå­è·¯ï¼‰ä½•ä»¥ä¼ç‚ºï¼Ÿã€", feedback:"ä¸»èªæ˜¯å­”å­ï¼"}, {q:"ã€é­”ç‹æˆ°ã€‘ã€Œå°æ›°ã€æ˜¯èª°åœ¨å›ç­”ï¼Ÿ", opts:["å­”å­", "å­è·¯ (ç”±)", "ç„¡æ³•è€…"], ans:1, damage:100, guide:"åˆ¤æ–·å°è©±è€…...", highlight:"å°æ›°", feedback:"å›ç­”è€…æ˜¯å­è·¯ï¼"}, {q:"ã€é­”ç‹æˆ°ã€‘ã€Œèè«¸å¤«å­ã€ä¸­çš„ã€Œå¤«å­ã€æ˜¯æŒ‡èª°ï¼Ÿ", opts:["å­è·¯çš„çˆ¶è¦ª", "å­”å­", "åœ‹å›"], ans:1, damage:100, guide:"è§£æä»£è©...", highlight:"èè«¸å¤«å­", feedback:"å¤«å­ = å­”å­ï¼"}, {q:"ã€é­”ç‹æˆ°ã€‘å­è·¯å¼•ç”¨å­”å­çš„è©±ï¼Œç›®çš„æ˜¯ç‚ºäº†ï¼Ÿ", opts:["(A) åé§å­”å­", "(B) è§£é‡‹è‡ªå·±èª‡è€€çš„åŸå› ", "(C) æ‰¹è©•åœ‹å›"], ans:1, damage:100, guide:"æ¨è«–æ„åœ–...", feedback:"æ˜¯ç‚ºäº†è§£é‡‹è¡Œç‚ºï¼"}, {q:"ã€å¥§ç¾©ã€‘é€™æ®µå°è©±é¡¯ç¤ºäº†ä»€éº¼æ¨£çš„å¸«ç”Ÿäº’å‹•ï¼Ÿ", opts:["åŠæ‹”å¼©å¼µ", "å¾ªå¾ªå–„èª˜èˆ‡æ“šç†å›ç­”", "å†·æ¼ ç„¡æƒ…"], ans:1, damage:100, guide:"è–å…‰è£æ±ºï¼", feedback:"å¤æ–‡é­”ç¥è¢«å°å°äº†ï¼"}] }
                ]
            }
        ];

        // ------------------------------------------
        // æ ¸å¿ƒé‚è¼¯ (ç§»é™¤ä¾è³´ Tailwind Class çš„æ“ä½œ)
        // ------------------------------------------

        function startGame() {
            document.getElementById('screen-start').classList.add('hidden');
            document.getElementById('screen-map').classList.remove('hidden');
            document.getElementById('screen-map').style.display = 'flex'; // ç¢ºä¿é¡¯ç¤º
            updateMapButtons();
        }

        function enterReview(stageIdx) {
            gameData.currentStageIdx = stageIdx;
            const stage = stages[stageIdx];
            document.getElementById('weapon-icon').innerText = stage.weapon.icon;
            document.getElementById('weapon-name').innerText = stage.weapon.name;
            document.getElementById('weapon-desc').innerHTML = stage.weapon.desc;
            document.getElementById('screen-map').classList.add('hidden');
            document.getElementById('screen-review').classList.remove('hidden');
        }

        function startCombat() {
            gameData.playerHp = gameData.playerMaxHp;
            gameData.currentQIdx = 0;
            gameData.stepIdx = 0;
            gameData.selectedOption = null;
            setupEnemy();
            document.getElementById('screen-review').classList.add('hidden');
            document.getElementById('screen-battle').classList.remove('hidden');
            loadStepUI();
            updatePlayerHpBar();
        }

        function setupEnemy() {
            const stage = stages[gameData.currentStageIdx];
            const enemy = stage.enemies[gameData.currentQIdx];
            gameData.maxHp = enemy.hp;
            gameData.enemyHp = enemy.hp;
            
            // æ€ªç‰©é¡¯ç¤ºé‚è¼¯
            const bgContainer = document.getElementById('monster-bg-container');
            bgContainer.innerText = enemy.sprite;
            bgContainer.className = ''; // é‡ç½®å‹•ç•«
            void bgContainer.offsetWidth; // è§¸ç™¼é‡ç¹ª
            bgContainer.className = 'monster-active'; // å•Ÿå‹•å‘¼å¸ç‡ˆ

            document.getElementById('enemy-name').innerText = enemy.name;
            updateHpBar();
        }

        function loadStepUI() {
            const stage = stages[gameData.currentStageIdx];
            const qData = stage.questions[gameData.currentQIdx];
            const stepData = qData.steps[gameData.stepIdx];
            
            gameData.selectedOption = null;
            const confirmBtn = document.getElementById('confirm-btn');
            confirmBtn.disabled = true;

            document.getElementById('current-stage-num').innerText = gameData.currentStageIdx + 6;
            document.getElementById('current-q-num').innerText = gameData.currentQIdx + 1;
            document.getElementById('guide-step-idx').innerText = gameData.stepIdx + 1;
            document.getElementById('guide-text').innerText = stepData.guide;
            
            // æ–‡æœ¬æ¸²æŸ“ (å« Highlight)
            let passageHTML = qData.passage;
            for (let i = 0; i < gameData.stepIdx; i++) {
                const s = qData.steps[i];
                if (s.highlight) {
                    let className = "highlight-target";
                    if (s.highlightType === 'clue') className = "highlight-clue";
                    else if (s.highlightType === 'delete') className = "highlight-delete";
                    passageHTML = passageHTML.replace(s.highlight, `<span class="${className}">${s.highlight}</span>`);
                }
            }
            document.getElementById('passage-text').innerHTML = passageHTML;
            document.getElementById('question-text').innerText = stepData.q;
            
            // æ¸²æŸ“é¸é …
            const grid = document.getElementById('options-grid');
            grid.innerHTML = '';
            stepData.opts.forEach((opt, idx) => {
                const btn = document.createElement('div');
                btn.className = "opt-btn";
                btn.innerHTML = `<span class="opt-tag">${String.fromCharCode(65+idx)}</span> <span>${opt}</span>`;
                btn.onclick = () => selectOption(idx, btn);
                grid.appendChild(btn);
            });
        }

        function selectOption(idx, btnElement) {
            gameData.selectedOption = idx;
            document.querySelectorAll('.opt-btn').forEach(b => b.classList.remove('selected'));
            btnElement.classList.add('selected');
            document.getElementById('confirm-btn').disabled = false;
        }

        function executeAttack() {
            const stage = stages[gameData.currentStageIdx];
            const qData = stage.questions[gameData.currentQIdx];
            const stepData = qData.steps[gameData.stepIdx];
            const idx = gameData.selectedOption;
            const btns = document.querySelectorAll('.opt-btn');

            if (idx === stepData.ans) {
                // ç­”å°
                btns[idx].classList.add('correct');
                showFlashText(getWeaponEffectName(stage.name));
                showDamageNumber(stepData.damage);
                
                // æ›´æ–°é«˜äº®
                if (stepData.highlight) {
                    let className = "highlight-target";
                    if (stepData.highlightType === 'clue') className = "highlight-clue";
                    else if (stepData.highlightType === 'delete') className = "highlight-delete";
                    const originalHTML = document.getElementById('passage-text').innerHTML;
                    const newHTML = originalHTML.replace(stepData.highlight, `<span class="${className}">${stepData.highlight}</span>`);
                    document.getElementById('passage-text').innerHTML = newHTML;
                }

                gameData.enemyHp = Math.max(0, gameData.enemyHp - stepData.damage);
                updateHpBar();
                setTimeout(() => { nextStep(); }, 1500);
            } else {
                // ç­”éŒ¯
                btns[idx].classList.add('wrong');
                showFlashText("OUCH!");
                gameData.playerHp = Math.max(0, gameData.playerHp - 25);
                updatePlayerHpBar();
                document.getElementById('game-container').style.animation = "shake 0.4s";
                setTimeout(()=> document.getElementById('game-container').style.animation = "", 400);

                if (gameData.playerHp <= 0) {
                    setTimeout(() => {
                        document.getElementById('screen-gameover').classList.remove('hidden');
                    }, 1000);
                }
            }
        }

        function getWeaponEffectName(stageName) {
            if (stageName.includes("å¤§æ„")) return "SLASH!";
            if (stageName.includes("ç´°ç¯€")) return "SCAN!";
            if (stageName.includes("æ·±é›£")) return "BEAM!";
            if (stageName.includes("æ–‡é«”")) return "SHIELD!";
            return "HIT!";
        }

        function nextStep() {
            const stage = stages[gameData.currentStageIdx];
            const qData = stage.questions[gameData.currentQIdx];
            if (gameData.stepIdx < qData.steps.length - 1) {
                gameData.stepIdx++;
                loadStepUI();
            } else {
                nextLevel();
            }
        }

        function nextLevel() {
            const stage = stages[gameData.currentStageIdx];
            if (gameData.currentQIdx < stage.enemies.length - 1) {
                gameData.currentQIdx++;
                gameData.stepIdx = 0;
                setupEnemy();
                loadStepUI();
            } else {
                // é—œå¡å®Œæˆ
                document.getElementById('screen-battle').classList.add('hidden');
                document.getElementById('screen-result').classList.remove('hidden');
                gameData.heroLv += [15, 15, 20, 49][gameData.currentStageIdx];
                if(gameData.heroLv > 99) gameData.heroLv = 99;
                document.getElementById('hero-lv').innerText = gameData.heroLv;
                updateMapButtons();
            }
        }

        function backToMap() {
            document.getElementById('screen-result').classList.add('hidden');
            document.getElementById('screen-map').classList.remove('hidden');
            updateMapButtons();
        }

        function retryStage() {
            document.getElementById('screen-gameover').classList.add('hidden');
            startCombat();
        }

        function showDamageNumber(val) {
            const bgContainer = document.getElementById('game-container');
            const popup = document.createElement('div');
            popup.className = 'damage-popup';
            popup.innerText = `-${val}`;
            bgContainer.appendChild(popup);
            setTimeout(() => popup.remove(), 1000);
        }

        function showFlashText(text) {
            const txt = document.getElementById('flash-msg');
            txt.innerText = text;
            txt.style.color = (text === 'OUCH!') ? '#ef4444' : 'white';
            txt.classList.remove('flash-anim');
            void txt.offsetWidth; // Trigger reflow
            txt.classList.add('flash-anim');
        }

        function updateHpBar() {
            const percent = (gameData.enemyHp / gameData.maxHp) * 100;
            document.getElementById('enemy-hp-bar').style.width = percent + '%';
        }

        function updatePlayerHpBar() {
            const percent = (gameData.playerHp / gameData.playerMaxHp) * 100;
            document.getElementById('player-hp-bar').style.width = percent + '%';
        }

        function updateMapButtons() {
            for (let i = 0; i <= 3; i++) {
                const btn = document.getElementById(`btn-${i}`);
                const stage = stages[i];
                if (gameData.heroLv >= stage.levelReq) {
                    btn.disabled = false;
                }
            }
        }
    </script>
</body>
</html>
