<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>會考國文：五招宗師之路</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { touch-action: manipulation; user-select: none; background-color: #1a202c; color: white; font-family: "Microsoft JhengHei", sans-serif; }
        .btn-option { transition: all 0.1s; }
        .btn-option:active { transform: scale(0.98); }
        .fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- 完整 15 題題庫 (變數名稱已修正為 allQuestions) ---
        const allQuestions = [
            // --- 第一招：形音義辨正 ---
            {
                id: 1, move: "形音義", color: "bg-red-600",
                text: "【108會考】下列詞語「」中的字，何者讀音正確？",
                options: [
                    { text: "春寒料「峭」：ㄑㄧㄠˋ", isCorrect: true },
                    { text: "「湛」藍天空：ㄕㄣˋ", isCorrect: false },
                    { text: "一掃陰「霾」：ㄌㄧˊ", isCorrect: false },
                    { text: "胼手「胝」足：ㄉㄧˇ", isCorrect: false }
                ],
                desc: "正確讀音：湛(ㄓㄢˋ)藍、陰霾(ㄇㄞˊ)、胼手胝(ㄓ)足。"
            },
            {
                id: 2, move: "形音義", color: "bg-red-600",
                text: "【110會考】下列選項「」中的字，何組讀音相同？",
                options: [
                    { text: "「恪」守 / 一「格」 (ㄎㄜˋ / ㄍㄜˊ)", isCorrect: false },
                    { text: "「抵」死 / 府「邸」 (ㄉㄧˇ / ㄉㄧˇ)", isCorrect: true },
                    { text: "字「斟」 / 「勘」正 (ㄓㄣ / ㄎㄢ)", isCorrect: false },
                    { text: "鍾靈「毓」秀 / 「育」成 (ㄩˋ / ㄩˋ)", isCorrect: false }
                ],
                desc: "B選項皆讀作ㄉㄧˇ。A為ㄎㄜˋ/ㄍㄜˊ，C為ㄓㄣ/ㄎㄢ。"
            },
            {
                id: 3, move: "形音義", color: "bg-red-600",
                text: "【106會考】根據六書造字原則，「末」字（木上端加一點）屬於哪一類？",
                options: [
                    { text: "象形", isCorrect: false },
                    { text: "指事", isCorrect: true },
                    { text: "會意", isCorrect: false },
                    { text: "形聲", isCorrect: false }
                ],
                desc: "「末」字是在「木」的上端加一橫畫，指示樹梢的位置，屬於「指事」字。"
            },

            // --- 第二招：成語與詞語 ---
            {
                id: 4, move: "成語運用", color: "bg-yellow-600",
                text: "【108會考】兩軍交戰，策略是「先轉移敵人目標，使疏於防範，然後乘其不意攻其不備」。這適合用哪個成語形容？",
                options: [
                    { text: "拋磚引玉", isCorrect: false },
                    { text: "聲東擊西", isCorrect: true },
                    { text: "裡應外合", isCorrect: false },
                    { text: "趁火打劫", isCorrect: false }
                ],
                desc: "「聲東擊西」指表面上聲言攻擊東面，實則攻擊西面，製造錯覺的戰術。"
            },
            {
                id: 5, move: "成語運用", color: "bg-yellow-600",
                text: "【113會考】下列文句中的詞語，何者使用最恰當？",
                options: [
                    { text: "飲食應注重均衡，五穀不分才健康", isCorrect: false },
                    { text: "這房子經歷風災依然堅固，真是不愧屋漏", isCorrect: false },
                    { text: "使用儀器以蠡測海後，終於得到準確數據", isCorrect: false },
                    { text: "對於行將就木之人，世間一切已無須牽掛", isCorrect: true }
                ],
                desc: "A:五穀不分指脫離生產；B:不愧屋漏指暗室無欺；C:以蠡測海指見識淺薄；D:行將就木指壽命將盡，用法正確。"
            },
            {
                id: 6, move: "成語運用", color: "bg-yellow-600",
                text: "【105會考】「我的作文功力和明華差不多(1)；思恩的表現更好，我只能勉強(2)；而蔚然是常勝軍，和他比我就(3)了！」",
                options: [
                    { text: "1.望其項背 2.不分軒輊 3.望塵莫及", isCorrect: false },
                    { text: "1.不分軒輊 2.望其項背 3.望塵莫及", isCorrect: true },
                    { text: "1.望塵莫及 2.不分軒輊 3.望其項背", isCorrect: false },
                    { text: "1.不分軒輊 2.望塵莫及 3.望其項背", isCorrect: false }
                ],
                desc: "差不多=不分軒輊；勉強看得到背影(落後不遠)=望其項背；完全比不上=望塵莫及。"
            },

            // --- 第三招：文意理解 ---
            {
                id: 7, move: "文意理解", color: "bg-green-600",
                text: "【110會考】「人生是短暫的，死亡是自然的，認清了這點，活著的時候才可以真正的投入。」這句話涵義最接近？",
                options: [
                    { text: "經歷死亡幽谷，才能發現活著的可貴", isCorrect: false },
                    { text: "了解生命限制，坦然面對死亡，就能盡情活著", isCorrect: true },
                    { text: "生命的價值在於不斷挑戰自我", isCorrect: false },
                    { text: "能將死亡置之度外的人往往雖死猶生", isCorrect: false }
                ],
                desc: "文句強調「認清死亡自然」的限制後，反而能「真正投入」活著的當下。"
            },
            {
                id: 8, move: "文意理解", color: "bg-green-600",
                text: "【109會考】「人生何嘗不像一場競賽...有的後繼無力被人超前，有的半路摔倒一蹶不起。因此，______。」畫線處最適合填入？",
                options: [
                    { text: "人生的競賽往往是暗潮洶湧的", isCorrect: false },
                    { text: "臺前風光是背後汗水累積而成", isCorrect: false },
                    { text: "堅持到底的人才是最後的贏家", isCorrect: true },
                    { text: "勝敗皆由天定，無須怨天尤人", isCorrect: false }
                ],
                desc: "前文提到有人抱怨、有人放棄，對比之下，強調「堅持」的重要性。"
            },
            {
                id: 9, move: "文意理解", color: "bg-green-600",
                text: "【107會考】「真正的詩是詩人的心靈，真正的船是造船者...倘若能把人剖開，就能在他裡面看到作品最微末的一撇一鉤。」意旨最接近？",
                options: [
                    { text: "作品皆是創作者內心情志的投射", isCorrect: true },
                    { text: "創作心境的重要性高於呈現技巧", isCorrect: false },
                    { text: "藝術創作的精髓源於用心仔細觀察", isCorrect: false },
                    { text: "不同的創作可能有相同的內在精神", isCorrect: false }
                ],
                desc: "這段文字強調作品與創作者心靈的緊密連結，作品反映了作者的內在。"
            },

            // --- 第四招：圖表判讀 ---
            {
                id: 10, move: "圖表判讀", color: "bg-blue-600",
                text: "【111會考】關於「背包與健康」：後背重量建議體重10%內，側背5%內。若小明體重60公斤，何者最符合健康概念？",
                options: [
                    { text: "後背，背包總重 7 公斤", isCorrect: false },
                    { text: "側背，背包總重 4 公斤", isCorrect: false },
                    { text: "後背，背包總重 5 公斤", isCorrect: true },
                    { text: "側背，背包總重 3.5 公斤", isCorrect: false }
                ],
                desc: "60kg的10%是6kg(後背上限)，5%是3kg(側背上限)。5kg後背(5<6)符合標準。"
            },
            {
                id: 11, move: "圖表判讀", color: "bg-blue-600",
                text: "【107會考】圖表：甲國小學經費高於平均。乙國各階段皆低於平均。丙國國中經費高於平均。丁國高中經費最高。何者正確？",
                options: [
                    { text: "甲國小學教育經費 高於 平均值", isCorrect: true }, 
                    { text: "丙國國中教育經費 高於 平均值", isCorrect: false },
                    { text: "各國高等教育經費皆多於其他階段", isCorrect: false },
                    { text: "丁國高中生經費是所有國家中最低", isCorrect: false }
                ],
                desc: "依據107年會考第4題圖表，甲國的小學教育經費條狀圖高於OECD平均線。"
            },
            {
                id: 12, move: "圖表判讀", color: "bg-blue-600",
                text: "【113會考】關於「人工智慧、機器學習、深度學習」的關係圖，文中描述深度學習屬於機器學習，機器學習屬於人工智慧。下列圖示關係何者正確？",
                options: [
                    { text: "三個圓圈完全分開", isCorrect: false },
                    { text: "大圓(AI)包中圓(機器)，中圓包小圓(深度)", isCorrect: true },
                    { text: "三個圓圈部分重疊", isCorrect: false },
                    { text: "大圓(深度)包中圓(機器)，中圓包小圓(AI)", isCorrect: false }
                ],
                desc: "根據層次關係：人工智慧 > 機器學習 > 深度學習，應為同心圓包含關係。"
            },

            // --- 第五招：邏輯推論 ---
            {
                id: 13, move: "邏輯推論", color: "bg-purple-600",
                text: "【105會考】「君子如抱美玉而深藏不市，小人則以石為玉而又炫之。」君子不同於小人的特質是？",
                options: [
                    { text: "臨財不苟", isCorrect: false },
                    { text: "見多識廣", isCorrect: false },
                    { text: "沉潛含蓄", isCorrect: true },
                    { text: "真實坦率", isCorrect: false }
                ],
                desc: "「深藏不市」對比「炫之」，強調君子不隨意炫耀，具有「沉潛含蓄」的特質。"
            },
            {
                id: 14, move: "邏輯推論", color: "bg-purple-600",
                text: "【114會考】新詩：「我的快樂除以我的悲傷 / 得到的商 / 卻只是1」。這首詩暗示？",
                options: [
                    { text: "悲傷會過去，快樂會留下", isCorrect: false },
                    { text: "我的快樂等同於我的悲傷", isCorrect: true },
                    { text: "除了悲傷之外，我一無所有", isCorrect: false },
                    { text: "每個人的愛情都只有一種結果", isCorrect: false }
                ],
                desc: "數學邏輯推論：若 A ÷ B = 1，則 A = B。故快樂=悲傷。"
            },
            {
                id: 15, move: "邏輯推論", color: "bg-purple-600",
                text: "【109會考】心理學家讓兩組人看同一張照片。A組被告知他是罪犯，描述其眼神兇惡；B組被告知他是科學家，描述其眼神深邃。這印證？",
                options: [
                    { text: "先入為主的成見，常會影響我們的判斷", isCorrect: true },
                    { text: "做任何事都要有決心與鬥志", isCorrect: false },
                    { text: "看事情的角度因人而異，無絕對是非", isCorrect: false },
                    { text: "眼見為憑是科學研究的基礎", isCorrect: false }
                ],
                desc: "同樣的照片因「標籤」不同而產生不同解讀，這是「成見」的影響。"
            }
        ];

        function App() {
            const [gameState, setGameState] = useState("start"); // start, game, result
            const [qIndex, setQIndex] = useState(0);
            const [score, setScore] = useState(0);
            const [hp, setHp] = useState(3);
            const [showFeedback, setShowFeedback] = useState(false);
            const [isCorrect, setIsCorrect] = useState(false);
            const [shaking, setShaking] = useState(false);

            // 遊戲初始化
            useEffect(() => {
                if (gameState === "start") {
                    setScore(0);
                    setHp(3);
                    setQIndex(0);
                    setShowFeedback(false);
                }
            }, [gameState]);

            const currentQ = allQuestions[qIndex];

            // 進入下一題或結束
            const nextQ = () => {
                setShowFeedback(false);
                if (hp <= 0 || qIndex >= allQuestions.length - 1) {
                    setGameState("result");
                } else {
                    setQIndex(prev => prev + 1);
                }
            };

            const handleAnswer = (correct) => {
                setIsCorrect(correct);
                setShowFeedback(true);
                if (correct) {
                    setScore(prev => prev + 1);
                } else {
                    setHp(prev => prev - 1);
                    setShaking(true);
                    setTimeout(() => setShaking(false), 500);
                }
            };

            const restart = () => {
                setGameState("start");
            };

            // Start Screen
            if (gameState === "start") {
                return (
                    <div className="flex flex-col items-center justify-center min-h-screen p-6 text-center space-y-8 bg-slate-900">
                        <div className="text-6xl mb-4">📜</div>
                        <h1 className="text-4xl font-bold text-yellow-400 mb-2">會考五招：宗師之路</h1>
                        <p className="text-gray-400 max-w-md">
                            掌握「形音、成語、文意、圖表、邏輯」五大絕招，挑戰15道歷屆會考真題！
                        </p>
                        <div className="bg-slate-800 p-4 rounded-lg text-left text-sm text-gray-300 space-y-2 border border-slate-700">
                            <p>⚔️ <span className="text-yellow-400">總關卡：</span> 15 回合 (每招3題)</p>
                            <p>❤️ <span className="text-red-400">生命值：</span> 3 顆心 (答錯扣血)</p>
                            <p>💡 <span className="text-green-400">通關條件：</span> 活著走到最後</p>
                        </div>
                        <button 
                            onClick={() => setGameState("game")}
                            className="bg-yellow-600 hover:bg-yellow-500 text-white text-xl font-bold py-4 px-12 rounded-full shadow-lg transition-transform transform active:scale-95"
                        >
                            開始修煉
                        </button>
                    </div>
                );
            }

            // Game Screen
            if (gameState === "game") {
                return (
                    <div className={`flex flex-col items-center min-h-screen p-4 max-w-2xl mx-auto ${shaking ? 'shake' : ''}`}>
                        {/* Header Stats */}
                        <div className="w-full flex justify-between items-center mb-6 bg-slate-800 p-3 rounded-lg border border-slate-700">
                            <div className="text-yellow-400 font-bold">第 {qIndex + 1} / {allQuestions.length} 題</div>
                            <div className="text-red-400 font-bold text-xl">
                                {"❤️".repeat(hp)}{"🖤".repeat(3-hp)}
                            </div>
                        </div>

                        {/* Skill Tip Badge */}
                        <div className="w-full mb-2 fade-in">
                            <span className={`text-xs font-bold px-2 py-1 rounded text-white mr-2 ${currentQ.color}`}>
                                {currentQ.move}
                            </span>
                        </div>

                        {/* Question Card */}
                        <div className="w-full bg-slate-800 p-6 rounded-xl shadow-2xl border border-slate-600 mb-6 relative overflow-hidden">
                            <h2 className="text-xl font-bold leading-relaxed mt-2">{currentQ.text}</h2>
                        </div>

                        {/* Options */}
                        <div className="w-full space-y-3">
                            {currentQ.options.map((opt, i) => (
                                <button
                                    key={i}
                                    onClick={() => !showFeedback && handleAnswer(opt.isCorrect)}
                                    disabled={showFeedback}
                                    className={`btn-option w-full p-4 rounded-lg text-left text-lg font-medium border-2 
                                        ${showFeedback 
                                            ? (opt.isCorrect 
                                                ? "bg-green-600 border-green-400 text-white" 
                                                : "bg-slate-700 border-slate-700 text-gray-500")
                                            : "bg-slate-700 border-slate-600 hover:bg-slate-600 text-gray-200 hover:border-yellow-500"}
                                    `}
                                >
                                    <span className="inline-block w-6 h-6 rounded-full bg-slate-900 text-center text-sm leading-6 mr-3 text-gray-400">
                                        {['A','B','C','D'][i]}
                                    </span>
                                    {opt.text}
                                </button>
                            ))}
                        </div>

                        {/* Feedback Modal (Overlay) */}
                        {showFeedback && (
                            <div className="fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-6 fade-in backdrop-blur-sm">
                                <div className="bg-slate-800 p-6 rounded-2xl max-w-md w-full border-2 border-slate-600 shadow-2xl">
                                    <div className={`text-4xl text-center mb-4 ${isCorrect ? 'text-green-400' : 'text-red-400'}`}>
                                        {isCorrect ? "✨ 答對了！" : "💥 答錯了..."}
                                    </div>
                                    <div className="text-gray-300 text-lg leading-relaxed mb-6 bg-slate-900 p-4 rounded-lg">
                                        <span className="text-yellow-400 font-bold">解析：</span>
                                        {currentQ.desc}
                                    </div>
                                    <button 
                                        onClick={nextQ}
                                        className="w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-xl transition-colors"
                                    >
                                        {hp <= 0 ? "查看結果" : (qIndex >= allQuestions.length - 1 ? "完成試煉" : "下一題 ➔")}
                                    </button>
                                </div>
                            </div>
                        )}
                    </div>
                );
            }

            // Result Screen
            if (gameState === "result") {
                const passed = hp > 0;
                return (
                    <div className="flex flex-col items-center justify-center min-h-screen p-6 text-center space-y-6 bg-slate-900 fade-in">
                        <div className="text-8xl mb-2">{passed ? "🏆" : "🥀"}</div>
                        <h2 className="text-4xl font-bold text-white">
                            {passed ? "試煉通過！" : "修煉未成"}
                        </h2>
                        <div className="text-2xl text-yellow-400 font-bold">
                            得分：{score} / 15
                        </div>
                        <p className="text-gray-400 max-w-md">
                            {passed 
                                ? "恭喜你！你已經掌握了會考國文的五大核心絕招，面對大考也能游刃有餘！" 
                                : "別氣餒！國文五招需要反覆練習，記住「找轉折、看圖表、抓重點」，再來挑戰一次！"}
                        </p>
                        <button 
                            onClick={restart}
                            className="bg-slate-700 hover:bg-slate-600 text-white text-lg font-bold py-3 px-10 rounded-full border border-slate-500"
                        >
                            再次挑戰
                        </button>
                    </div>
                );
            }
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
