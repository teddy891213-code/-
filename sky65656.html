<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>信用卡 vs 儲值卡 VR大挑戰</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <style>
      /* 這是浮在畫面上的文字樣式 (為了讓中文顯示清楚) */
      #ui-layer {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none; /* 讓點擊穿透到 VR 世界 */
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
        padding-top: 50px;
        z-index: 999;
      }
      .question-box {
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 20px;
        border-radius: 10px;
        font-size: 24px;
        text-align: center;
        max-width: 80%;
        margin-bottom: 20px;
        border: 2px solid white;
      }
      .score-box {
        font-size: 30px;
        color: yellow;
        font-weight: bold;
        text-shadow: 2px 2px 4px #000;
      }
      .hint {
        margin-top: auto;
        margin-bottom: 50px;
        color: #ddd;
        font-size: 14px;
      }
    </style>
  </head>
  <body>
    <div id="ui-layer">
      <div class="score-box">得分: <span id="score">0</span></div>
      <div class="question-box" id="question-text">題目載入中...</div>
      <div class="hint">請點擊下方的 紅色方塊(信用卡) 或 藍色球體(儲值卡)</div>
    </div>

    <a-scene cursor="rayOrigin: mouse" raycaster="objects: .clickable">
      
      <a-sky color="#222"></a-sky>

      <a-plane position="0 0 -4" rotation="-90 0 0" width="10" height="10" color="#333"></a-plane>

      <a-box id="btn-credit" class="clickable" position="-1.5 1 -4" color="#FF4444" 
             animation__mouseenter="property: scale; to: 1.2 1.2 1.2; dur: 200; startEvents: mouseenter"
             animation__mouseleave="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave">
        <a-text value="Credit Card" align="center" position="0 0.6 0" color="white"></a-text>
      </a-box>

      <a-sphere id="btn-stored" class="clickable" position="1.5 1 -4" radius="0.7" color="#4444FF"
                animation__mouseenter="property: scale; to: 1.2 1.2 1.2; dur: 200; startEvents: mouseenter"
                animation__mouseleave="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave">
        <a-text value="Stored Value" align="center" position="0 0.9 0" color="white"></a-text>
      </a-sphere>

      <a-light type="ambient" color="#BBB"></a-light>
      <a-light type="directional" position="1 2 1" intensity="0.5"></a-light>

      <a-entity camera look-controls position="0 1.6 0"></a-entity>

    </a-scene>

    <script>
      // 題庫 (來自你的圖片)
      // type: 1 = 信用卡 (Credit), 2 = 儲值卡 (Stored)
      const questions = [
        { text: "特性是「延後給付」，先消費後付款", type: 1 },
        { text: "這是一種「預付」的制度", type: 2 },
        { text: "需要先將現金存入其中，再持卡消費", type: 2 },
        { text: "不用預存，銀行會根據你的財力核發額度", type: 1 },
        { text: "通常用於小額支付", type: 2 },
        { text: "發卡銀行會參考你的「信用評分」", type: 1 },
        { text: "如果業者倒閉無法提供服務，需要退錢", type: 2 }
      ];

      let currentQuestionIndex = 0;
      let score = 0;
      
      // 抓取畫面上的元素
      const questionEl = document.getElementById('question-text');
      const scoreEl = document.getElementById('score');
      const btnCredit = document.getElementById('btn-credit');
      const btnStored = document.getElementById('btn-stored');

      // 顯示第一題
      function showQuestion() {
        if (currentQuestionIndex < questions.length) {
          questionEl.innerText = questions[currentQuestionIndex].text;
        } else {
          questionEl.innerText = "遊戲結束！ 最終得分: " + score;
          // 移除點擊事件避免繼續得分
          btnCredit.classList.remove('clickable');
          btnStored.classList.remove('clickable');
        }
      }

      // 檢查答案的函數
      function checkAnswer(selectedType) {
        if (currentQuestionIndex >= questions.length) return;

        const correctType = questions[currentQuestionIndex].type;

        if (selectedType === correctType) {
          score += 100;
          questionEl.innerText = "答對了！⭕";
          questionEl.style.color = "#44FF44"; // 綠色
        } else {
          score -= 50;
          questionEl.innerText = "答錯了！❌";
          questionEl.style.color = "#FF4444"; // 紅色
        }
        scoreEl.innerText = score;

        // 1秒後換下一題
        setTimeout(() => {
          currentQuestionIndex++;
          questionEl.style.color = "white"; // 恢復白色
          showQuestion();
        }, 1000);
      }

      // 綁定點擊事件
      // 點擊紅色方塊 (信用卡)
      btnCredit.addEventListener('click', function() {
        checkAnswer(1);
      });

      // 點擊藍色球體 (儲值卡)
      btnStored.addEventListener('click', function() {
        checkAnswer(2);
      });

      // 遊戲開始
      showQuestion();

    </script>
  </body>
</html>
